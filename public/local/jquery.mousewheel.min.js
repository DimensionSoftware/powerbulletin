/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
(function(a){function d(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,f=!0,g=0,h=0;return b=a.event.fix(c),b.type="mousewheel",c.wheelDelta&&(e=c.wheelDelta/120),c.detail&&(e=-c.detail/3),h=e,c.axis!==undefined&&c.axis===c.HORIZONTAL_AXIS&&(h=0,g=-1*e),c.wheelDeltaY!==undefined&&(h=c.wheelDeltaY/120),c.wheelDeltaX!==undefined&&(g=-1*c.wheelDeltaX/120),d.unshift(b,e,g,h),(a.event.dispatch||a.event.handle).apply(this,d)}var b=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var c=b.length;c;)a.event.fixHooks[b[--c]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=b.length;a;)this.addEventListener(b[--a],d,!1);else this.onmousewheel=d},teardown:function(){if(this.removeEventListener)for(var a=b.length;a;)this.removeEventListener(b[--a],d,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery)

tween = function(el,prop,to,duration,easing,callbacks){
  var callbacks=callbacks || {},
    onStart=callbacks.onStart || function(){},onUpdate=callbacks.onUpdate || function(){},onComplete=callbacks.onComplete || function(){};
  var startTime=_getTime(),_delay,progress=0,from=el.offsetTop,elStyle=el.style;
  if(prop==="left"){from=el.offsetLeft;}
  var diff=to-from;
  _cancelTween();
  _startTween();
  function _getTime(){
    if(window.performance && window.performance.now){
      return window.performance.now();
    }else{
      if(window.performance && window.performance.webkitNow){
        return window.performance.webkitNow();
      }else{
        if(Date.now){return Date.now();}else{return new Date().getTime();}
      }
    }
  }
  function _step(){
    if(!progress){onStart.call();}
    progress=_getTime()-startTime;
    _tween();
    if(progress>=el._time){
      el._time=(progress>el._time) ? progress+_delay-(progress- el._time) : progress+_delay-1;
      if(el._time<progress+1){el._time=progress+1;}
    }
    if(el._time<duration){el._id=_request(_step);}else{onComplete.call();}
  }
  function _tween(){
    if(duration>0){
      el.currVal=_ease(el._time,from,diff,duration,easing);
      elStyle[prop]=Math.round(el.currVal)+"px";
    }else{
      elStyle[prop]=to+"px";
    }
    onUpdate.call();
  }
  function _startTween(){
    _delay=1000/60;
    el._time=progress+_delay;
    _request=(!window.requestAnimationFrame) ? function(f){_tween(); return setTimeout(f,0.01);} : window.requestAnimationFrame;
    el._id=_request(_step);
  }
  function _cancelTween(){
    if(el._id==null){return;}
    if(!window.requestAnimationFrame){clearTimeout(el._id);
    }else{window.cancelAnimationFrame(el._id);}
    el._id=null;
  }
  function _ease(t,b,c,d,type){
    switch(type){
      case "linear":
        return c*t/d + b;
        break;
      case "easeOutQuad":
        t /= d; return -c * t*(t-2) + b;
        break;
      case "easeInOutQuad":
        t /= d/2;
        if (t < 1) return c/2*t*t + b;
        t--;
        return -c/2 * (t*(t-2) - 1) + b;
        break;
      case "easeOutCubic":
        t /= d; t--; return c*(t*t*t + 1) + b;
        break;
      case "easeOutQuart":
        t /= d; t--; return -c * (t*t*t*t - 1) + b;
        break;
      case "easeOutQuint":
        t /= d; t--; return c*(t*t*t*t*t + 1) + b;
        break;
      case "easeOutCirc":
        t /= d; t--; return c * Math.sqrt(1 - t*t) + b;
        break;
      case "easeOutSine":
        return c * Math.sin(t/d * (Math.PI/2)) + b;
        break;
      case "easeOutExpo":
        return c * ( -Math.pow( 2, -10 * t/d ) + 1 ) + b;
        break;
      case "mcsEaseOut":
        var ts=(t/=d)*t,tc=ts*t;
        return b+c*(0.499999999999997*tc*ts + -2.5*ts*ts + 5.5*tc + -6.5*ts + 4*t);
        break;
      case "draggerRailEase":
        t /= d/2;
        if (t < 1) return c/2*t*t*t + b;
        t -= 2;
        return c/2*(t*t*t + 2) + b;
        break;
    }
  }
}
