(function(){var e=function(n,r){var o=e.resolve(n,r||"/"),t=e.modules[o];if(!t)throw Error("Failed to resolve module "+n+", tried "+o);var i=e.cache[o],s=i?i.exports:t();return s};e.paths=[],e.modules={},e.cache={},e.extensions=[".js",".coffee",".json",".ls"],e._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},e.resolve=function(){return function(n,r){function o(n){if(n=a.normalize(n),e.modules[n])return n;for(var r=0;e.extensions.length>r;r++){var o=e.extensions[r];if(e.modules[n+o])return n+o}}function t(n){n=n.replace(/\/+$/,"");var r=a.normalize(n+"/package.json");if(e.modules[r]){var t=e.modules[r](),i=t.browserify;if("object"==typeof i&&i.main){var s=o(a.resolve(n,i.main));if(s)return s}else if("string"==typeof i){var s=o(a.resolve(n,i));if(s)return s}else if(t.main){var s=o(a.resolve(n,t.main));if(s)return s}}return o(n+"/index")}function i(e,n){for(var r=s(n),i=0;r.length>i;i++){var a=r[i],u=o(a+"/"+e);if(u)return u;var l=t(a+"/"+e);if(l)return l}var u=o(e);return u?u:void 0}function s(e){var n;n="/"===e?[""]:a.normalize(e).split("/");for(var r=[],o=n.length-1;o>=0;o--)if("node_modules"!==n[o]){var t=n.slice(0,o+1).join("/")+"/node_modules";r.push(t)}return r}if(r||(r="/"),e._core[n])return n;var a=e.modules.path();r=a.resolve("/",r);var u=r||"/";if(n.match(/^(?:\.\.?\/|\/)/)){var l=o(a.resolve(u,n))||t(a.resolve(u,n));if(l)return l}var c=i(n,u);if(c)return c;throw Error("Cannot find module '"+n+"'")}}(),e.alias=function(n,r){var o=e.modules.path(),t=null;try{t=e.resolve(n+"/package.json","/")}catch(i){t=e.resolve(n,"/")}for(var s=o.dirname(t),a=(Object.keys||function(e){var n=[];for(var r in e)n.push(r);return n})(e.modules),u=0;a.length>u;u++){var l=a[u];if(l.slice(0,s.length+1)===s+"/"){var c=l.slice(s.length);e.modules[r+c]=e.modules[s+c]}else l===s&&(e.modules[r]=e.modules[s])}},function(){var n={},r="undefined"!=typeof window?window:{},o=!1;e.define=function(t,i){!o&&e.modules.__browserify_process&&(n=e.modules.__browserify_process(),o=!0);var s=e._core[t]?"":e.modules.path().dirname(t),a=function(n){var r=e(n,s),o=e.cache[e.resolve(n,s)];return o&&null===o.parent&&(o.parent=u),r};a.resolve=function(n){return e.resolve(n,s)},a.modules=e.modules,a.define=e.define,a.cache=e.cache;var u={id:t,filename:t,exports:{},loaded:!1,parent:null};e.modules[t]=function(){return e.cache[t]=u,i.call(u.exports,a,u,u.exports,s,t,n,r),u.loaded=!0,u.exports}}}(),e.define("path",function(e,n,r,o,t,i){function s(e,n){for(var r=[],o=0;e.length>o;o++)n(e[o],o,e)&&r.push(e[o]);return r}function a(e,n){for(var r=0,o=e.length;o>=0;o--){var t=e[o];"."==t?e.splice(o,1):".."===t?(e.splice(o,1),r++):r&&(e.splice(o,1),r--)}if(n)for(;r--;r)e.unshift("..");return e}var u=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;r.resolve=function(){for(var e="",n=!1,r=arguments.length;r>=-1&&!n;r--){var o=r>=0?arguments[r]:i.cwd();"string"==typeof o&&o&&(e=o+"/"+e,n="/"===o.charAt(0))}return e=a(s(e.split("/"),function(e){return!!e}),!n).join("/"),(n?"/":"")+e||"."},r.normalize=function(e){var n="/"===e.charAt(0),r="/"===e.slice(-1);return e=a(s(e.split("/"),function(e){return!!e}),!n).join("/"),e||n||(e="."),e&&r&&(e+="/"),(n?"/":"")+e},r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(s(e,function(e){return e&&"string"==typeof e}).join("/"))},r.dirname=function(e){var n=u.exec(e)[1]||"",r=!1;return n?1===n.length||r&&3>=n.length&&":"===n.charAt(1)?n:n.substring(0,n.length-1):"."},r.basename=function(e,n){var r=u.exec(e)[2]||"";return n&&r.substr(-1*n.length)===n&&(r=r.substr(0,r.length-n.length)),r},r.extname=function(e){return u.exec(e)[3]||""}}),e.define("__browserify_process",function(e,n,r,o,t,i){var i=n.exports={};i.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(n){var r=[];return window.addEventListener("message",function(e){if(e.source===window&&"browserify-tick"===e.data&&(e.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(e){r.push(e),window.postMessage("browserify-tick","*")}}return function(e){setTimeout(e,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.binding=function(n){if("evals"===n)return e("vm");throw Error("No such module. (Possibly not yet loaded)")},function(){var n,r="/";i.cwd=function(){return r},i.chdir=function(o){n||(n=e("path")),r=n.resolve(o,r)}}()}),e.define("/validations.ls",function(e,n,r){(function(){var e,n=r!==void 0&&r||this;n.myvalidation=e=function(){return console.log("whee test")}}).call(this)}),e.define("/layout.ls",function(e){(function(){function n(e,n){for(var r=-1,o=n.length>>>0;o>++r;)if(e===n[r]&&r in n)return!0;return!1}var r,o,t,i,s,a,u,l,c;r=$(window),o=$(document),t=!1||n("msTransform",document.documentElement.style),i=!1||n("MozBoxSizing",document.documentElement.style),s=!(!window.opera||!window.opera.version),a=10,r.v=e("./validations"),$("#query").focus(),$(".forum .container").masonry({itemSelector:".post",isAnimated:!0,isFitWidth:!0,isResizable:!0}),r.resize(function(){return setTimeout(function(){return $.waypoints("refresh")},800)}),setTimeout(function(){return $("#sort li").waypoint({context:"ul",offset:30,handler:function(e){var n;return n=$(this),"up"===e&&(n=n.prev()),n.length||(n=$(this)),$("#sort li.active").removeClass("active"),n.addClass("active")}}),$(".forum .header").waypoint("sticky"),$(".forum .header").waypoint({offset:"80%",handler:function(){return $(".forum .invisible").removeClass("invisible")}}),$(".forum .header").waypoint({offset:"40%",handler:function(){return $(".forum .invisible").removeClass("invisible"),$(".forum .stuck").addClass("invisible")}}),$(".forum").waypoint({offset:"33%",handler:function(e){var n,o,t,i,s,a;return n=$(this),o=n.attr("id"),t="down"===e?o:$("#"+o).prevAll(".forum:first").attr("id"),$("header .menu").find(".active").removeClass("active"),i=$("header .menu").find("."+t.replace(/_/,"-")).addClass("active"),$(".bg").each(function(){return $(this).remove().prependTo($("body"))}),r.bgAnim&&clearTimeout(r.bgAnim),s=$(".bg.active"),s.length?r.bgAnim=setTimeout(function(){var n;return n=$("#forum"+("_bg_"+i.data("id"))),s.css("top","down"===e?-300:300),s.removeClass("active"),n.addClass("active visible"),r.bgAnim=0},300):(a=$("#forum"+("_bg_"+i.data("id"))),a.addClass("active"))}})},100),u=function(){var e;return e=r.scrollTop(),$("body").toggleClass("has-scrolled",e>a)},setTimeout(function(){return r.on("scroll",function(){return u()}),u()},1300),window.awesomeScrollTo=function(e,n,r){var o,i,a,u;return n=function(){var e;return n?void 0:e=1},e=$(e),o=r||600,i=100,t||s?(e[0].scrollIntoView(),n()):(a=Math.round(e.position().top)-i,u=window.scrollY,Math.abs(a-u)>30?$("html,body").animate({scrollTop:a},o,function(){}):n()),e},o.on("mousedown",".scroll-to",function(){return awesomeScrollTo($(this).data("scroll-to")),!1}),o.on("mousedown",".scroll-to-top",function(){return $(this).attr("title","Scroll to Top!"),$("html,body").animate({scrollTop:$("body").offset().top},140,function(){return $("html,body").animate({scrollTop:$("body").offset().top+a},110,function(){return $("html,body").animate({scrollTop:$("body").offset().top},75,function(){return!1})})})}),l=function(){var e,n;return e=$(this).data("fid"),n="<h1>add post form goes here</h1>",$.get("/ajax/add-post",{fid:e},function(e){return $(e).dialog({modal:!0}),!1})},c=function(){var e;return e=$("#add-post-form"),$.post("/ajax/add-post",e.serialize(),function(){return console.log("success! post added"),console.log("stub: do something fancy to confirm submission")}),!1},o.on("click","#add-post-submit",c),o.on("click",".onclick-add-post-dialog",l),o.on("click","header",function(e){return"header"===e.target.className&&$("body").removeClass("expanded"),$("#query").focus()}),o.on("keypress","#query",function(){return $("body").addClass("expanded")})}).call(this)}),e("/layout.ls")})();