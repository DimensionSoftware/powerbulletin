(function(){var n=function(t,e){var o=n.resolve(t,e||"/"),r=n.modules[o];if(!r)throw Error("Failed to resolve module "+t+", tried "+o);var i=n.cache[o],u=i?i.exports:r();return u};n.paths=[],n.modules={},n.cache={},n.extensions=[".js",".coffee",".json",".ls"],n._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},n.resolve=function(){return function(t,e){function o(t){if(t=a.normalize(t),n.modules[t])return t;for(var e=0;n.extensions.length>e;e++){var o=n.extensions[e];if(n.modules[t+o])return t+o}}function r(t){t=t.replace(/\/+$/,"");var e=a.normalize(t+"/package.json");if(n.modules[e]){var r=n.modules[e](),i=r.browserify;if("object"==typeof i&&i.main){var u=o(a.resolve(t,i.main));if(u)return u}else if("string"==typeof i){var u=o(a.resolve(t,i));if(u)return u}else if(r.main){var u=o(a.resolve(t,r.main));if(u)return u}}return o(t+"/index")}function i(n,t){for(var e=u(t),i=0;e.length>i;i++){var a=e[i],s=o(a+"/"+n);if(s)return s;var l=r(a+"/"+n);if(l)return l}var s=o(n);return s?s:void 0}function u(n){var t;t="/"===n?[""]:a.normalize(n).split("/");for(var e=[],o=t.length-1;o>=0;o--)if("node_modules"!==t[o]){var r=t.slice(0,o+1).join("/")+"/node_modules";e.push(r)}return e}if(e||(e="/"),n._core[t])return t;var a=n.modules.path();e=a.resolve("/",e);var s=e||"/";if(t.match(/^(?:\.\.?\/|\/)/)){var l=o(a.resolve(s,t))||r(a.resolve(s,t));if(l)return l}var c=i(t,s);if(c)return c;throw Error("Cannot find module '"+t+"'")}}(),n.alias=function(t,e){var o=n.modules.path(),r=null;try{r=n.resolve(t+"/package.json","/")}catch(i){r=n.resolve(t,"/")}for(var u=o.dirname(r),a=(Object.keys||function(n){var t=[];for(var e in n)t.push(e);return t})(n.modules),s=0;a.length>s;s++){var l=a[s];if(l.slice(0,u.length+1)===u+"/"){var c=l.slice(u.length);n.modules[e+c]=n.modules[u+c]}else l===u&&(n.modules[e]=n.modules[u])}},function(){var t={},e="undefined"!=typeof window?window:{},o=!1;n.define=function(r,i){!o&&n.modules.__browserify_process&&(t=n.modules.__browserify_process(),o=!0);var u=n._core[r]?"":n.modules.path().dirname(r),a=function(t){var e=n(t,u),o=n.cache[n.resolve(t,u)];return o&&null===o.parent&&(o.parent=s),e};a.resolve=function(t){return n.resolve(t,u)},a.modules=n.modules,a.define=n.define,a.cache=n.cache;var s={id:r,filename:r,exports:{},loaded:!1,parent:null};n.modules[r]=function(){return n.cache[r]=s,i.call(s.exports,a,s,s.exports,u,r,t,e),s.loaded=!0,s.exports}}}(),n.define("path",function(n,t,e,o,r,i){function u(n,t){for(var e=[],o=0;n.length>o;o++)t(n[o],o,n)&&e.push(n[o]);return e}function a(n,t){for(var e=0,o=n.length;o>=0;o--){var r=n[o];"."==r?n.splice(o,1):".."===r?(n.splice(o,1),e++):e&&(n.splice(o,1),e--)}if(t)for(;e--;e)n.unshift("..");return n}var s=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;e.resolve=function(){for(var n="",t=!1,e=arguments.length;e>=-1&&!t;e--){var o=e>=0?arguments[e]:i.cwd();"string"==typeof o&&o&&(n=o+"/"+n,t="/"===o.charAt(0))}return n=a(u(n.split("/"),function(n){return!!n}),!t).join("/"),(t?"/":"")+n||"."},e.normalize=function(n){var t="/"===n.charAt(0),e="/"===n.slice(-1);return n=a(u(n.split("/"),function(n){return!!n}),!t).join("/"),n||t||(n="."),n&&e&&(n+="/"),(t?"/":"")+n},e.join=function(){var n=Array.prototype.slice.call(arguments,0);return e.normalize(u(n,function(n){return n&&"string"==typeof n}).join("/"))},e.dirname=function(n){var t=s.exec(n)[1]||"",e=!1;return t?1===t.length||e&&3>=t.length&&":"===t.charAt(1)?t:t.substring(0,t.length-1):"."},e.basename=function(n,t){var e=s.exec(n)[2]||"";return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e},e.extname=function(n){return s.exec(n)[3]||""}}),n.define("__browserify_process",function(n,t,e,o,r,i){var i=t.exports={};i.nextTick=function(){var n="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(n)return function(n){return window.setImmediate(n)};if(t){var e=[];return window.addEventListener("message",function(n){if(n.source===window&&"browserify-tick"===n.data&&(n.stopPropagation(),e.length>0)){var t=e.shift();t()}},!0),function(n){e.push(n),window.postMessage("browserify-tick","*")}}return function(n){setTimeout(n,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.binding=function(t){if("evals"===t)return n("vm");throw Error("No such module. (Possibly not yet loaded)")},function(){var t,e="/";i.cwd=function(){return e},i.chdir=function(o){t||(t=n("path")),e=t.resolve(o,e)}}()}),n.define("/lib/mutant/package.json",function(n,t){t.exports={main:"index.js"}}),n.define("/lib/mutant/mutant.ls",function(n){(function(){var t,e,o;"undefined"!=typeof window&&null!==window||(t=n("jsdom"),e=function(n,e){var o,r,i;return o=["../../public/local/jquery-1.8.3.min.js"],r={html:n,scripts:o},i=function(n,t){return n?e(n):(t.$=t.jQuery,e(null,t))},t.env(r,i)}),this.run=function(t,o,r){var i,u,a,s,l,c,d,f;if(null==r&&(r=function(){}),i=o.initial,u=o.locals||{},a=o.html,s=o.user,l=t.onLoad||function(n,t){return t(null)},c=t.onInitial||function(n,t){return t(null)},d=t.onMutate||function(n,t){return t(null)},f=t.onPersonalize||function(n,t,e){return e(null)},n("../../app/views/mutants.js"),"undefined"!=typeof window&&null!==window)return i?l.call(u,window,function(n){return n?r(n):c.call(u,window,function(n){return n?r(n):f.call(u,s,window,function(n){return n?r(n):void 0})})}):(window.renderJade=function(n,t){return r(null,jade.render(window.document.getElementById(n),t,u))},window.marshal=function(n,t){return window[n]=t},t["static"].call(u,window,function(n){return n?r(n):l.call(u,window,function(n){return n?r(n):d.call(u,window,r)})}));if(a)return e(a,function(n,e){return n?r(n):(e.renderJade=function(n,t){return jade.render(e.document.getElementById(n),t,u)},e.marshal=function(n,t){var o;return o=e.document.createElement("script"),e.$(o).attr("type","text/javascript"),e.$(o).text("window['"+n+"'] = "+JSON.stringify(t)+";"),e.document.body.appendChild(o)},t["static"].call(u,e,function(n){return n?r(n):(e.$("script.jsdom").remove(),r(null,"<!doctype html>"+e.document.outerHTML))}))});throw Error("need html for serverside")},o=function(n){return n.callbacks.some(function(n){return n.surfable})},this.surfableRoutes=function(n){var t,e,r,i,u=[];for(t=0,r=(e=n.routes.get).length;r>t;++t)i=e[t],o(i)&&u.push(""+i.regexp);return u}}).call(this)}),n.define("/app/mutants.ls",function(){(function(){var n,t;n=function(n,t,e){var o;return o=e?" forum-"+e:"",n.$("html").attr("class",t+""+o),n.marshal("mutator",t),n.$(".bg-set").remove(),n.$(".bg").each(function(){return n.$(this).addClass("bg-set").remove().prependTo(n.$("body"))}),n.$("header .menu").find(".active").removeClass("active"),n.$("menu .row").has(".forum-"+e).find(".title").addClass("active")},t=function(n,t,e){var o,r;return null==e&&(e="down"),n.bgAnim&&clearTimeout(n.bgAnim),o=n.$(".bg.active"),r=n.$("#forum"+("_bg_"+t.data("id"))),r.css("display","block"),o.length?n.bgAnim=setTimeout(function(){return o.css("top","down"===e?-300:300),o.removeClass("active"),r.addClass("active"),n.bgAnim=0},100):r.addClass("active")},this.homepage={"static":function(t,e){return t.renderJade("main_content","homepage"),n(t,"homepage",this.activeForumId),e()},onLoad:function(n,e){return n.$(".forum .container").masonry({itemSelector:".post",isAnimated:!0,isFitWidth:!0,isResizable:!0}),setTimeout(function(){var e;return e=n.$,e(".forum .header").waypoint("sticky",{offset:-70}),e(".forum").waypoint({offset:"25%",handler:function(o){var r,i,u,a;return r=e(this),i=r.attr("id"),(u="down"===o?i:e("#"+i).prevAll(".forum:first").attr("id"))?(e("header .menu").find(".active").removeClass("active"),a=e("header .menu").find("."+u.replace(/_/,"-")).addClass("active"),e(".forum .stuck").removeClass("stuck"),t(n,a,o)):void 0}})},100),e()},onUnload:function(n,t){return n.$(".forum .container").masonry("destroy"),n.$(".forum .header").waypoint("destroy"),n.$(".forum").waypoint("destroy"),t()}},this.forum={"static":function(t,e){return t.renderJade("left_content","nav"),t.renderJade("main_content","posts"),t.marshal("activeForumId",this.activeForumId),t.marshal("activePostId",this.activePostId),n(t,"forum",this.activeForumId),e()},onLoad:function(n,e){var o,r;return o=n.$("header .menu .forum-"+n.activeForumId),t(n,o),r=n.$,r(".forum .breadcrumb").waypoint("sticky",{offset:-70}),e()},onMutate:function(n,t){return n.scrollToTop(),n.s,t()},onUnload:function(n,t){return n.$(".forum .breadcrumb").waypoint("destroy"),t()}},this.search={"static":function(n,t){return t()},onLoad:function(n,t){return t()},onInitial:function(n,t){return t()},onMutate:function(n,t){return t()}},this.admin={"static":function(n,t){return t()}}}).call(this)}),n.define("/app/layout.ls",function(n){(function(){function t(n,t){for(var e=-1,o=t.length>>>0;o>++e;)if(n===t[e]&&e in t)return!0;return!1}var e,o,r,i,u,a,s,l;e=$(window),o=$(document),r=!1||t("msTransform",document.documentElement.style),i=!1||t("MozBoxSizing",document.documentElement.style),u=!(!window.opera||!window.opera.version),a=10,window.mutant=n("../lib/mutant/mutant"),window.mutants=n("./mutants"),window.mutate=function(){var n,t;return(n=$(this).attr("href"))?null!=n&&n.match(/#/)?!0:(t={},History.pushState({searchParams:t},"",n),!1):!1},s=(null!=(l=window.mutants[window.mutator])?l.onLoad:void 0)||function(n,t){return t()},s.call(this,window,function(){var n;return $("#query").focus(),o.on("click","a.mutant",window.mutate),History.Adapter.bind(window,"statechange",function(){var n;return n=History.getPageUrl().replace(/\/$/,""),$.get(n,{_surf:1},function(n){var t,e;return null!=(t=n.locals)&&t.title&&o.attr("title",n.locals.title),e=window.mutants[window.mutator].onUnload||function(n,t){return t(null)},e(window,function(){var t;try{return window.mutant.run(window.mutants[n.mutant],{locals:n.locals})}catch(e){return t=e}})}),!1}),window.scrollToTop=function(){var n;if(0!==$(window).scrollTop())return n=$("html,body"),n.animate({scrollTop:$("body").offset().top},140,function(){return n.animate({scrollTop:$("body").offset().top+a},110,function(){return n.animate({scrollTop:$("body").offset().top},75,function(){})})})},n=function(){var n;return n=e.scrollTop(),$("body").toggleClass("scrolled",n>a)},setTimeout(function(){return e.on("scroll",function(){return n()}),n()},1300),window.awesomeScrollTo=function(n,t,e){var o,i,a,s;return e=function(){var n;return e?void 0:n=1},n=$(n),o=t||600,i=100,n.length?(r||u?(n[0].scrollIntoView(),e()):(a=Math.round(n.position().top)-i,s=window.scrollY,Math.abs(a-s)>30?$("html,body").animate({scrollTop:a},o,function(){}):e()),n):void 0},o.on("click",".scroll-to",function(){return awesomeScrollTo($(this).data("scroll-to")),!1}),o.on("mousedown",".scroll-to-top",function(){return $(this).attr("title","Scroll to Top!"),window.scrollToTop(),!1}),o.on("click","header",function(n){return n.target.className.indexOf("toggler")>-1&&$("body").removeClass("expanded"),$("#query").focus()}),o.on("keypress","#query",function(){return $("body").addClass("expanded")})})}).call(this)}),n("/app/layout.ls"),n.define("/app/entry.ls",function(n){(function(){function t(n,t){for(var e=-1,o=t.length>>>0;o>++e;)if(n===t[e]&&e in t)return!0;return!1}var e,o,r,i,u,a,s,l;e=$(window),o=$(document),e.resize(function(){return setTimeout(function(){return $.waypoints("refresh")},800)}),setTimeout(function(){return $("#sort li").waypoint({context:"ul",offset:30,handler:function(n){var t;return t=$(this),"up"===n&&(t=t.prev()),t.length||(t=$(this)),$("#sort li.active").removeClass("active"),t.addClass("active")}})},100),o.on("click","html.homepage header .menu a.title",function(){return awesomeScrollTo($(this).data("scroll-to")),!1}),o.on("click","html.forum header .menu a.title",window.mutate),$("#left_content").resizable(),r=function(){var n;return n={fid:window.activeForumId},$.get("/resources/posts",n,function(n){return $(n).dialog({modal:!0}),!1})},i=function(){var n;return n=$("#add-post-form"),$.post("/resources/posts",n.serialize(),function(n,t,e){return console.log("success! post added",e),console.log("stub: do something fancy to confirm submission")}),!1},u=function(){var n,t,e;return n=$(this).parents(".subpost:first"),t=n.data("post-id"),e='<form method="post" action="/resources/posts">\n  <textarea name="body"></textarea>\n  <input type="hidden" name="forum_id" value="'+window.activeForumId+'">\n  <input type="hidden" name="parent_id" value="'+t+'">\n  <div>\n    <input type="submit" value="Post">\n  </div>\n</form>',0===n.find(".reply form").length?n.find(".reply:first").append(e):n.find(".reply:first form").remove()},a=function(){return $.fancybox.open("#auth")},s=function(){var n,t;return n=$(this),t={username:n.find("input[name=username]").val(),password:n.find("input[name=password]").val()},$.post(n.attr("action"),t,function(t){var e;return t.success?window.location.reload():(e=n.parents(".fancybox-wrap:first"),e.removeClass("shake"),setTimeout(function(){return e.addClass("shake")},100))}),!1},l=function(n){return function(){return window.user?n.apply(this,arguments):(a(),!1)}},o.on("click","#add-post-submit",l(i)),o.on("click",".onclick-add-post-dialog",r),o.on("click",".onclick-append-reply-ui",u),o.on("submit",".login form",s),$.getJSON("/auth/user",function(e){var o,r,i;return window.mutant=n("../lib/mutant/mutant"),window.mutants=n("./mutants"),window.mutate=function(){var n,t;return(n=$(this).attr("href"))?null!=n&&n.match(/#/)?!0:(t={},History.pushState({searchParams:t},"",n),!1):!1},o=(null!=(r=window.mutants[window.mutator])?r.onLoad:void 0)||function(n,t){return t()},i=(null!=(r=window.mutants[window.mutator])?r.onPersonalize:void 0)||function(n,t,e){return e()},o.call(this,window,function(){return i.call(this,e,window,function(){var n,o,r,i,u,a,s;return $("#query").focus(),o.on("click","a.mutant",window.mutate),History.Adapter.bind(window,"statechange",function(){var n;return n=History.getPageUrl().replace(/\/$/,""),$.get(n,{_surf:1},function(n){var t,r;return null!=(t=n.locals)&&t.title&&o.attr("title",n.locals.title),r=window.mutants[window.mutator].onUnload||function(n,t){return t(null)},r(window,function(){var t;try{return window.mutant.run(window.mutants[n.mutant],{locals:n.locals,user:e})}catch(o){return t=o}})}),!1}),n=$(window),o=$(document),r=!1||t("msTransform",document.documentElement.style),i=!1||t("MozBoxSizing",document.documentElement.style),u=!(!window.opera||!window.opera.version),a=10,window.scrollToTop=function(){var n;if(0!==$(window).scrollTop())return n=$("html,body"),n.animate({scrollTop:$("body").offset().top},140,function(){return n.animate({scrollTop:$("body").offset().top+a},110,function(){return n.animate({scrollTop:$("body").offset().top},75,function(){})})})},s=function(){var t;return t=n.scrollTop(),$("body").toggleClass("scrolled",t>a)},setTimeout(function(){return n.on("scroll",function(){return s()}),s()},1300),window.awesomeScrollTo=function(n,t,e){var o,i,a,s;return e=function(){var n;return e?void 0:n=1},n=$(n),o=t||600,i=100,n.length?(r||u?(n[0].scrollIntoView(),e()):(a=Math.round(n.position().top)-i,s=window.scrollY,Math.abs(a-s)>30?$("html,body").animate({scrollTop:a},o,function(){}):e()),n):void 0},o.on("click",".scroll-to",function(){return awesomeScrollTo($(this).data("scroll-to")),!1}),o.on("mousedown",".scroll-to-top",function(){return $(this).attr("title","Scroll to Top!"),window.scrollToTop(),!1}),o.on("click","header",function(n){return n.target.className.indexOf("toggler")>-1&&$("body").removeClass("expanded"),$("#query").focus()}),o.on("keypress","#query",function(){return $("body").addClass("expanded")})})})})}).call(this)}),n("/app/entry.ls")})();