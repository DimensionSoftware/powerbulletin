(function(){var require=function(e,r){var t=require.resolve(e,r||"/"),s=require.modules[t];if(!s)throw Error("Failed to resolve module "+e+", tried "+t);var n=require.cache[t],o=n?n.exports:s();return o};require.paths=[],require.modules={},require.cache={},require.extensions=[".js",".coffee",".json",".ls"],require._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},require.resolve=function(){return function(e,r){function t(e){if(e=u.normalize(e),require.modules[e])return e;for(var r=0;require.extensions.length>r;r++){var t=require.extensions[r];if(require.modules[e+t])return e+t}}function s(e){e=e.replace(/\/+$/,"");var r=u.normalize(e+"/package.json");if(require.modules[r]){var s=require.modules[r](),n=s.browserify;if("object"==typeof n&&n.main){var o=t(u.resolve(e,n.main));if(o)return o}else if("string"==typeof n){var o=t(u.resolve(e,n));if(o)return o}else if(s.main){var o=t(u.resolve(e,s.main));if(o)return o}}return t(e+"/index")}function n(e,r){for(var n=o(r),u=0;n.length>u;u++){var i=n[u],a=t(i+"/"+e);if(a)return a;var l=s(i+"/"+e);if(l)return l}var a=t(e);return a?a:void 0}function o(e){var r;r="/"===e?[""]:u.normalize(e).split("/");for(var t=[],s=r.length-1;s>=0;s--)if("node_modules"!==r[s]){var n=r.slice(0,s+1).join("/")+"/node_modules";t.push(n)}return t}if(r||(r="/"),require._core[e])return e;var u=require.modules.path();r=u.resolve("/",r);var i=r||"/";if(e.match(/^(?:\.\.?\/|\/)/)){var a=t(u.resolve(i,e))||s(u.resolve(i,e));if(a)return a}var l=n(e,i);if(l)return l;throw Error("Cannot find module '"+e+"'")}}(),require.alias=function(e,r){var t=require.modules.path(),s=null;try{s=require.resolve(e+"/package.json","/")}catch(n){s=require.resolve(e,"/")}for(var o=t.dirname(s),u=(Object.keys||function(e){var r=[];for(var t in e)r.push(t);return r})(require.modules),i=0;u.length>i;i++){var a=u[i];if(a.slice(0,o.length+1)===o+"/"){var l=a.slice(o.length);require.modules[r+l]=require.modules[o+l]}else a===o&&(require.modules[r]=require.modules[o])}},function(){var e={},r="undefined"!=typeof window?window:{},t=!1;require.define=function(s,n){!t&&require.modules.__browserify_process&&(e=require.modules.__browserify_process(),t=!0);var o=require._core[s]?"":require.modules.path().dirname(s),u=function(e){var r=require(e,o),t=require.cache[require.resolve(e,o)];return t&&null===t.parent&&(t.parent=i),r};u.resolve=function(e){return require.resolve(e,o)},u.modules=require.modules,u.define=require.define,u.cache=require.cache;var i={id:s,filename:s,exports:{},loaded:!1,parent:null};require.modules[s]=function(){return require.cache[s]=i,n.call(i.exports,u,i,i.exports,o,s,e,r),i.loaded=!0,i.exports}}}(),require.define("path",function(e,r,t,s,n,o){function u(e,r){for(var t=[],s=0;e.length>s;s++)r(e[s],s,e)&&t.push(e[s]);return t}function i(e,r){for(var t=0,s=e.length;s>=0;s--){var n=e[s];"."==n?e.splice(s,1):".."===n?(e.splice(s,1),t++):t&&(e.splice(s,1),t--)}if(r)for(;t--;t)e.unshift("..");return e}var a=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;t.resolve=function(){for(var e="",r=!1,t=arguments.length;t>=-1&&!r;t--){var s=t>=0?arguments[t]:o.cwd();"string"==typeof s&&s&&(e=s+"/"+e,r="/"===s.charAt(0))}return e=i(u(e.split("/"),function(e){return!!e}),!r).join("/"),(r?"/":"")+e||"."},t.normalize=function(e){var r="/"===e.charAt(0),t="/"===e.slice(-1);return e=i(u(e.split("/"),function(e){return!!e}),!r).join("/"),e||r||(e="."),e&&t&&(e+="/"),(r?"/":"")+e},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(u(e,function(e){return e&&"string"==typeof e}).join("/"))},t.dirname=function(e){var r=a.exec(e)[1]||"",t=!1;return r?1===r.length||t&&3>=r.length&&":"===r.charAt(1)?r:r.substring(0,r.length-1):"."},t.basename=function(e,r){var t=a.exec(e)[2]||"";return r&&t.substr(-1*r.length)===r&&(t=t.substr(0,t.length-r.length)),t},t.extname=function(e){return a.exec(e)[3]||""}}),require.define("__browserify_process",function(e,r,t,s,n,o){var o=r.exports={};o.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,r="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(r){var t=[];return window.addEventListener("message",function(e){if(e.source===window&&"browserify-tick"===e.data&&(e.stopPropagation(),t.length>0)){var r=t.shift();r()}},!0),function(e){t.push(e),window.postMessage("browserify-tick","*")}}return function(e){setTimeout(e,0)}}(),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.binding=function(r){if("evals"===r)return e("vm");throw Error("No such module. (Possibly not yet loaded)")},function(){var r,t="/";o.cwd=function(){return t},o.chdir=function(s){r||(r=e("path")),t=r.resolve(s,t)}}()}),require.define("/lib/mutant/package.json",function(e,r){r.exports={main:"index.js"}}),require.define("/lib/mutant/mutant.ls",function(e){(function(){var r,t,s;"undefined"!=typeof window&&null!==window||(r=e("jsdom"),t=function(e,t){var s,n,o;return s=["../../public/local/jquery-1.8.3.min.js"],n={html:e,scripts:s},o=function(e,r){return e?t(e):(r.$=r.jQuery,t(null,r))},r.env(n,o)}),this.run=function(r,s,n){var o,u,i,a,l,c;if(null==n&&(n=function(){}),o=s.initial,u=s.locals||{},i=s.html,a=r.onLoad||function(e,r){return r(null)},l=r.onInitial||function(e,r){return r(null)},c=r.onMutate||function(e,r){return r(null)},e("../../app/views/mutants.js"),"undefined"!=typeof window&&null!==window)return o?a.call(u,window,function(e){return e?n(e):l.call(u,window,n)}):(window.renderJade=function(e,r){return n(null,jade.render(window.document.getElementById(e),r,u))},window.marshal=function(e,r){return window[e]=r},r["static"].call(u,window,function(e){return e?n(e):a.call(u,window,function(e){return e?n(e):c.call(u,window,n)})}));if(i)return t(i,function(e,t){return e?n(e):(t.renderJade=function(e,r){return jade.render(t.document.getElementById(e),r,u)},t.marshal=function(e,r){var s;return s=t.document.createElement("script"),t.$(s).attr("type","text/javascript"),t.$(s).text("window['"+e+"'] = "+JSON.stringify(r)+";"),t.document.body.appendChild(s)},r["static"].call(u,t,function(e){return e?n(e):(t.$("script.jsdom").remove(),n(null,"<!doctype html>"+t.document.outerHTML))}))});throw Error("need html for serverside")},s=function(e){return e.callbacks.some(function(e){return e.surfable})},this.surfableRoutes=function(e){var r,t,n,o,u=[];for(r=0,n=(t=e.routes.get).length;n>r;++r)o=t[r],s(o)&&u.push(""+o.regexp);return u}}).call(this)}),require.define("/app/views/mutants.js",function(require,module,exports,__dirname,__filename,process,global){jade=function(e){function r(e){return null!=e}return Array.isArray||(Array.isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)}),Object.keys||(Object.keys=function(e){var r=[];for(var t in e)e.hasOwnProperty(t)&&r.push(t);return r}),e.merge=function(e,t){var s=e["class"],n=t["class"];(s||n)&&(s=s||[],n=n||[],Array.isArray(s)||(s=[s]),Array.isArray(n)||(n=[n]),s=s.filter(r),n=n.filter(r),e["class"]=s.concat(n).join(" "));for(var o in t)"class"!=o&&(e[o]=t[o]);return e},e.attrs=function(r,t){var s=[],n=r.terse;delete r.terse;var o=Object.keys(r),u=o.length;if(u){s.push("");for(var i=0;u>i;++i){var a=o[i],l=r[a];"boolean"==typeof l||null==l?l&&(n?s.push(a):s.push(a+'="'+a+'"')):0==a.indexOf("data")&&"string"!=typeof l?s.push(a+"='"+JSON.stringify(l)+"'"):"class"==a&&Array.isArray(l)?s.push(a+'="'+e.escape(l.join(" "))+'"'):t&&t[a]?s.push(a+'="'+e.escape(l)+'"'):s.push(a+'="'+l+'"')}}return s.join(" ")},e.escape=function(e){return(e+"").replace(/&(?!(\w+|\#\d+);)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},e.rethrow=function(e,r,t){if(!r)throw e;var s=3,n=require("fs").readFileSync(r,"utf8"),o=n.split("\n"),u=Math.max(t-s,0),i=Math.min(o.length,t+s),s=o.slice(u,i).map(function(e,r){var s=r+u+1;return(s==t?"  > ":"    ")+s+"| "+e}).join("\n");throw e.path=r,e.message=(r||"Jade")+":"+t+"\n"+s+"\n\n"+e.message,e},e}({}),jade.templates={},jade.render=function(e,r,t){var s=jade.templates[r](t);e.innerHTML=s},jade.templates.homepage=function(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp,forum_mixin=function(e,r){this.block,this.attributes||{},this.escaped||{},buf.push("<img"),buf.push(attrs({id:"forum_bg_"+e.id,src:""+cache_url+"/images/bg_"+e.id+".jpg","class":"bg initial"},{"class":!0,id:!0,src:!0})),buf.push("/><div"),buf.push(attrs({id:"forum_"+e.id,"class":"forum "+(""+(e.classes||"")+" "+(r%2?"odd":"even"))},{"class":!0,id:!0})),buf.push("><a"),buf.push(attrs({name:"forum_"+e.id},{name:!0})),buf.push('></a><div class="header"><div class="description"><a'),buf.push(attrs({href:e.slug,"class":"mutant"},{href:!0})),buf.push(">");var t=e.description;buf.push(escape(null==t?"":t)),buf.push('</a></div></div><div class="container">'),e.posts&&(function(){if("number"==typeof e.posts.length)for(var r=0,t=e.posts.length;t>r;r++){var s=e.posts[r];post_mixin(e,s,r)}else for(var r in e.posts){var s=e.posts[r];post_mixin(e,s,r)}}.call(this),buf.push("<div"),buf.push(attrs({"data-scroll-to":"#forum_"+e.id,title:"Scroll top of "+e.title+"!","class":"up scroll-to"},{"class":!0,"data-scroll-to":!0,title:!0})),buf.push("></div>")),buf.push("</div></div>")},post_mixin=function(e,r){this.block,this.attributes||{},this.escaped||{},buf.push("<div"),buf.push(attrs({id:"post_"+r.id,"class":"post "+("col"+Math.ceil(2*Math.random()))},{"class":!0,id:!0})),buf.push("><a"),buf.push(attrs({href:e.slug,"class":"mutant"},{href:!0,"class":!0})),buf.push('><h5 class="title">');var t=r.title;buf.push(null==t?"":t),buf.push('<span class="date">'+escape(null==(interp=r.date)?"":interp)+'</span></h5></a><p class="body">');var t=r.body;buf.push(null==t?"":t),buf.push("</p>"),r.posts&&function(){if("number"==typeof r.posts.length)for(var e=0,t=r.posts.length;t>e;e++){var s=r.posts[e];subpost_mixin(s,e)}else for(var e in r.posts){var s=r.posts[e];subpost_mixin(s,e)}}.call(this),buf.push('<div class="comment"><div class="photo"><img'),buf.push(attrs({src:""+cache_url+"/images/profile.jpg"},{src:!0})),buf.push('/></div><input type="text" placeholder="Say it ..." class="msg"/></div></div>')},subpost_mixin=function(e,r){this.block,this.attributes||{},this.escaped||{},buf.push("<div"),buf.push(attrs({id:"subpost_"+e.id,"class":"subpost "+(r%2?"odd":"even")},{"class":!0,id:!0})),buf.push('><div class="photo"><img'),buf.push(attrs({src:""+cache_url+"/images/profile.jpg"},{src:!0})),buf.push('/></div><p class="body">');var t=e.body;buf.push(null==t?"":t),buf.push('</p><div class="signature"><span class="username">- '+escape(null==(interp=e.user_name)?"":interp)+'</span><span class="date">');var t=e.date;buf.push(escape(null==t?"":t)),buf.push("</span></div></div>")};forums?function(){if("number"==typeof forums.length)for(var e=0,r=forums.length;r>e;e++){var t=forums[e];forum_mixin(t,e)}else for(var e in forums){var t=forums[e];forum_mixin(t,e)}}.call(this):buf.push("<p>Create a forum first<i>!</i></p>")}return buf.join("")},jade.templates.nav=function(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var forum_mixin=function(e){this.block,this.attributes||{},this.escaped||{},buf.push('<h3 class="title">Forums</h3>'),e.forums&&(buf.push("<div"),buf.push(attrs({"class":"forum "+(""+(e.classes||"")+" forum-"+activeForumId)},{"class":!0})),buf.push(">"),function(){if("number"==typeof e.forums.length)for(var r=0,t=e.forums.length;t>r;r++){var s=e.forums[r];subforum_mixin(e,s,r)}else for(var r in e.forums){var s=e.forums[r];subforum_mixin(e,s,r)}}.call(this),buf.push("</div>"))},subforum_mixin=function(e,r){this.block,this.attributes||{},this.escaped||{},buf.push("<a"),buf.push(attrs({href:""+r.slug,"class":"title"},{href:!0})),buf.push(">");var t=r.title;buf.push(escape(null==t?"":t)),buf.push("</a>")},thread_mixin=function(e,r){this.block,this.attributes||{},this.escaped||{},buf.push('<div class="thread"><li><h4 class="title"><a'),buf.push(attrs({href:""+e.slug+"/"+r.title.replace(/\W+/g,"-")+"-"+r.id},{href:!0})),buf.push(">");var t=r.title;buf.push(escape(null==t?"":t)),buf.push("</a></h4></li></div>")};forums&&function(){if("number"==typeof forums.length)for(var e=0,r=forums.length;r>e;e++){var t=forums[e];forum_mixin(t,e)}else for(var e in forums){var t=forums[e];forum_mixin(t,e)}}.call(this),buf.push('<h3 class="title">Threads</h3><div class="create"><a class="button onclick-add-post-dialog">Create Thread</a></div>'),forums&&function(){if("number"==typeof forums.length)for(var e=0,r=forums.length;r>e;e++){var t=forums[e];t.posts&&(buf.push('<ul class="threads">'),function(){if("number"==typeof t.posts.length)for(var e=0,r=t.posts.length;r>e;e++){var s=t.posts[e];thread_mixin(t,s,e)}else for(var e in t.posts){var s=t.posts[e];thread_mixin(t,s,e)}}.call(this),buf.push("</ul>"))}else for(var e in forums){var t=forums[e];t.posts&&(buf.push('<ul class="threads">'),function(){if("number"==typeof t.posts.length)for(var e=0,r=t.posts.length;r>e;e++){var s=t.posts[e];thread_mixin(t,s,e)}else for(var e in t.posts){var s=t.posts[e];thread_mixin(t,s,e)}}.call(this),buf.push("</ul>"))}}.call(this)}return buf.join("")},jade.templates.posts=function(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var post_mixin=function(e){this.block,this.attributes||{},this.escaped||{},buf.push('<div class="post"><a'),buf.push(attrs({href:e.slug,"class":"mutant"},{href:!0})),buf.push(">");var r=e.title;buf.push(null==r?"":r),buf.push('</a><p class="body">');var r=e.body;buf.push(null==r?"":r),buf.push("</p>"),e.subposts&&function(){if("number"==typeof e.subposts.length)for(var r=0,t=e.subposts.length;t>r;r++){var s=e.subposts[r];subpost_mixin(e,s,r)}else for(var r in e.subposts){var s=e.subposts[r];subpost_mixin(e,s,r)}}.call(this),buf.push("</div>")},subpost_mixin=function(e,r,t){this.block,this.attributes||{},this.escaped||{},buf.push("<div"),buf.push(attrs({id:"subpost"+r.id,"class":"subpost "+(t%2?"odd":"even")},{"class":!0,id:!0})),buf.push('><h4 class="title">');var s=r.title;buf.push(null==s?"":s),buf.push('</h4><div class="user">');var s=r.user.name;buf.push(escape(null==s?"":s)),buf.push('</div><div class="date">');var s=r.date;buf.push(escape(null==s?"":s)),buf.push('</div><p class="body">');var s=r.body;buf.push(null==s?"":s),buf.push("</p></div>")};forums&&function(){if("number"==typeof forums.length)for(var e=0,r=forums.length;r>e;e++){var t=forums[e];buf.push("<img"),buf.push(attrs({id:"forum_bg_"+t.id,src:""+cache_url+"/images/bg_"+t.id+".jpg","class":"bg"},{id:!0,src:!0})),buf.push("/><div"),buf.push(attrs({id:"forum_"+t.id,"class":"forum "+(""+(t.classes||"")+" "+(e%2?"odd":"even"))},{"class":!0,id:!0})),buf.push('><div class="header"><div class="description">');var s=t.description;buf.push(escape(null==s?"":s)),buf.push('</div></div><div class="container">'),t.posts&&(function(){if("number"==typeof t.posts.length)for(var e=0,r=t.posts.length;r>e;e++){var s=t.posts[e];post_mixin(t,s,e)}else for(var e in t.posts){var s=t.posts[e];post_mixin(t,s,e)}}.call(this),buf.push("<div"),buf.push(attrs({"data-scroll-to":"#forum_"+t.id,title:"Scroll top of "+t.title+"!","class":"up scroll-to"},{"class":!0,"data-scroll-to":!0,title:!0})),buf.push("></div>")),buf.push("</div></div>")}else for(var e in forums){var t=forums[e];buf.push("<img"),buf.push(attrs({id:"forum_bg_"+t.id,src:""+cache_url+"/images/bg_"+t.id+".jpg","class":"bg"},{id:!0,src:!0})),buf.push("/><div"),buf.push(attrs({id:"forum_"+t.id,"class":"forum "+(""+(t.classes||"")+" "+(e%2?"odd":"even"))},{"class":!0,id:!0})),buf.push('><div class="header"><div class="description">');var s=t.description;buf.push(escape(null==s?"":s)),buf.push('</div></div><div class="container">'),t.posts&&(function(){if("number"==typeof t.posts.length)for(var e=0,r=t.posts.length;r>e;e++){var s=t.posts[e];post_mixin(t,s,e)}else for(var e in t.posts){var s=t.posts[e];post_mixin(t,s,e)}}.call(this),buf.push("<div"),buf.push(attrs({"data-scroll-to":"#forum_"+t.id,title:"Scroll top of "+t.title+"!","class":"up scroll-to"},{"class":!0,"data-scroll-to":!0,title:!0})),buf.push("></div>")),buf.push("</div></div>")}}.call(this)}return buf.join("")}}),require.define("fs",function(){}),require.define("/app/mutants.ls",function(){(function(){var e,r;e=function(e,r,t){var s;return s=t?" forum-"+t:"",e.$("html").attr("class",r+""+s),e.marshal("mutator",r),e.$(".bg-set").remove(),e.$(".bg").each(function(){return e.$(this).addClass("bg-set").remove().prependTo(e.$("body"))})},r=function(e,r,t){var s,n;return null==t&&(t="down"),e.bgAnim&&clearTimeout(e.bgAnim),s=e.$(".bg.active"),n=e.$("#forum"+("_bg_"+r.data("id"))),n.css("display","block"),s.length?e.bgAnim=setTimeout(function(){return s.css("top","down"===t?-300:300),s.removeClass("active"),n.addClass("active"),e.bgAnim=0},100):n.addClass("active")},this.homepage={"static":function(r,t){return r.renderJade("main_content","homepage"),e(r,"homepage",this.activeForumId),t()},onLoad:function(e,t){return e.$(".forum .container").masonry({itemSelector:".post",isAnimated:!0,isFitWidth:!0,isResizable:!0}),setTimeout(function(){var t;return t=e.$,t(".forum .header").waypoint("sticky",{offset:-70}),t(".forum").waypoint({offset:"25%",handler:function(s){var n,o,u,i;return n=t(this),o=n.attr("id"),(u="down"===s?o:t("#"+o).prevAll(".forum:first").attr("id"))?(t("header .menu").find(".active").removeClass("active"),i=t("header .menu").find("."+u.replace(/_/,"-")).addClass("active"),t(".forum .stuck").removeClass("stuck"),r(e,i,s)):void 0}})},100),t()},onUnload:function(e,r){return e.$(".forum .container").masonry("destroy"),e.$(".forum .header").waypoint("destroy"),e.$(".forum").waypoint("destroy"),r()}},this.forum={"static":function(r,t){return r.renderJade("left_content","nav"),r.renderJade("main_content","posts"),r.marshal("activeForumId",this.activeForumId),e(r,"forum",this.activeForumId),t()},onLoad:function(e,t){var s;return e.$("header .menu .active").removeClass("active"),s=e.$("header .menu .forum-"+e.activeForumId),s.addClass("active"),r(e,s),t()},onMutate:function(e,r){return e.scrollToTop(),e.s,r()}},this.search={"static":function(e,r){return r()},onLoad:function(e,r){return r()},onInitial:function(e,r){return r()},onMutate:function(e,r){return r()}}}).call(this)}),require.define("/app/layout.ls",function(e){(function(){function r(e,r){for(var t=-1,s=r.length>>>0;s>++t;)if(e===r[t]&&t in r)return!0;return!1}var t,s,n,o,u,i,a,l;t=$(window),s=$(document),n=!1||r("msTransform",document.documentElement.style),o=!1||r("MozBoxSizing",document.documentElement.style),u=!(!window.opera||!window.opera.version),i=10,window.mutant=e("../lib/mutant/mutant"),window.mutants=e("./mutants"),window.mutate=function(){var e,r;return(e=$(this).attr("href"))?null!=e&&e.match(/#/)?!0:(r={},History.pushState({searchParams:r},"",e),!1):!1},a=(null!=(l=window.mutants[window.mutator])?l.onLoad:void 0)||function(e,r){return r()},a.call(this,window,function(){var e;return $("#query").focus(),s.on("click","a.mutant",window.mutate),History.Adapter.bind(window,"statechange",function(){var e;return e=History.getPageUrl().replace(/\/$/,""),$.get(e,{_surf:1},function(e){var r,t;return null!=(r=e.locals)&&r.title&&(s.title=e.locals.title),t=window.mutants[window.mutator].onUnload||function(e,r){return r(null)},t(window,function(){return window.mutant.run(window.mutants[e.mutant],{locals:e.locals})})}),!1}),window.scrollToTop=function(){var e;if(0!==$(window).scrollTop())return e=$("html,body"),e.animate({scrollTop:$("body").offset().top},140,function(){return e.animate({scrollTop:$("body").offset().top+i},110,function(){return e.animate({scrollTop:$("body").offset().top},75,function(){})})})},e=function(){var e;return e=t.scrollTop(),$("body").toggleClass("scrolled",e>i)},setTimeout(function(){return t.on("scroll",function(){return e()}),e()},1300),window.awesomeScrollTo=function(e,r,t){var s,o,i,a;return t=function(){var e;return t?void 0:e=1},e=$(e),s=r||600,o=100,e.length?(n||u?(e[0].scrollIntoView(),t()):(i=Math.round(e.position().top)-o,a=window.scrollY,Math.abs(i-a)>30?$("html,body").animate({scrollTop:i},s,function(){}):t()),e):void 0},s.on("click",".scroll-to",function(){return awesomeScrollTo($(this).data("scroll-to")),!1}),s.on("mousedown",".scroll-to-top",function(){return $(this).attr("title","Scroll to Top!"),window.scrollToTop(),!1}),s.on("click","header",function(e){return e.target.className.indexOf("toggler")>-1&&$("body").removeClass("expanded"),$("#query").focus()}),s.on("keypress","#query",function(){return $("body").addClass("expanded")})})}).call(this)}),require("/app/layout.ls"),require.define("/app/entry.ls",function(){(function(){var e,r,t,s;e=$(window),r=$(document),e.resize(function(){return setTimeout(function(){return $.waypoints("refresh")},800)}),setTimeout(function(){return $("#sort li").waypoint({context:"ul",offset:30,handler:function(e){var r;return r=$(this),"up"===e&&(r=r.prev()),r.length||(r=$(this)),$("#sort li.active").removeClass("active"),r.addClass("active")}})},100),r.on("click","html.homepage header .menu a.title",function(){return awesomeScrollTo($(this).data("scroll-to")),!1}),r.on("click","html.forum header .menu a.title",window.mutate),t=function(){return $.get("/resources/posts",{fid:window.activeForumId},function(e){return $(e).dialog({modal:!0}),!1})},s=function(){var e;return e=$("#add-post-form"),$.post("/resources/posts",e.serialize(),function(){return console.log("success! post added"),console.log("stub: do something fancy to confirm submission")}),!1},r.on("click","#add-post-submit",s),r.on("click",".onclick-add-post-dialog",t)}).call(this)}),require("/app/entry.ls")})();