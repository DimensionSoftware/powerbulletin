var ccval = require("../lib/cc-validator-node/cc-validator-node");

var validator;

exports.setUp = function(callback) {
	var self = exports;
	validator = new ccval();
	callback();
};

exports.tearDown = function(callback) {
	callback();
}

exports.validNumber = function(test) {
	validator.validate( "4000000000000002", function( result ) {
		test.equals( typeof result.error, "undefined", "Error returned" );
		test.equals( result.luhn_valid, true, "Luhn should be valid" );
		test.equals( result.length_valid, true, "Length should be valid" );
		test.done();
	} );
}

exports.invalidLuhn = function(test) {
	validator.validate( "4000000000000003", function( result ) {
		test.equals( result.luhn_valid, false, "Luhn should be invalid" );
		test.done();
	} );
}

exports.invalidLength = function(test) {
	validator.validate( "40000000000000021", function( result ) {
		test.equals( result.length_valid, false, "Length should be invalid" );
		test.done();
	} );
}