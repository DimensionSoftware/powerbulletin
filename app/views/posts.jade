include mixins

if typeof(subPost) !== 'undefined'
  .forum
    .post.subpost(id="post_#{subPost.id}", data-user-id=subPost.user_id, data-post-id=subPost.id)
      h3.title= subPost.title
      .breadcrumb
        mixin breadcrumb(subPost)
      .profile.photo
        img(src="#{cache_url}/#{subPost.user_photo}")
      .user= subPost.user_name
      .date(data-time=subPost.created_iso)= subPost.created_human
      .edit-container
      if subPost.html
        .subPost.body!= subPost.html
      .reply
      mixin actions(subPost)
    .children
    if subPost.posts.length
        #listview
        each pg in prevPages
          div(data-page=pg)
        div(data-page=page)
          each sp in subPost.posts
            mixin subpost(sp, 0)

    else if subPost.morePosts
      a(href='#') Load more posts ...

else //- placeholder
  .forum

if typeof(subPost) !== 'undefined'
  #breadcrumb.breadcrumb
    mixin breadcrumb(subPost)

if pages.length > 1
  #paginator
    each pg in pages
      a.page(class=(pg == page ? 'active' : ''))= pg

//- vim:fdm=marker
