
mixin post-edit(p)
  action = p.id && '/'+p.id || ''
  .post-edit.onclick-submit(class=p.is_comment ? 'comment' : '')
    form#post_edit_form(action="/resources/posts#{action}", method="#{p.method || 'put'}")
      if !p.is_comment
        input.title(name='title', type='text', placeholder='Title', value=p.title)
      textarea.body(name='body')= p.body
      input(type='hidden', name='id', value=p.id || 0)
      input(type='hidden', name='forum_id', value=p.forum_id)
      input(type='hidden', name='parent_id', value=p.parent_id)
      input(type='hidden', name='csrf', value=p.csrf)
      input.button(type='submit', value='Save')
      input.button.cancel(type='button', value='Cancel')
    .preview

if typeof(post) !== 'undefined'
  mixin post-edit(post)
