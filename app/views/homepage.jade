extend layout

mixin forum(f, i)
  a(name="forum-#{f.id}") //- hashtag anchor
  .forum(id="forum_#{f.id}", class=(i % 2) ? 'odd' : 'even')
    .header
      h4.title= f.title
      span.description= f.description
    .container
      each t,ii in f.posts
        mixin post(t, ii)

mixin post(p, i)
  .post(id="post_#{p.id}", class=(i % 2) ? 'odd' : 'even', class="col#{Math.ceil(Math.random()*2)}")
    h5.title= p.title
      span.date Created #{p.date}
    each sp,i in p.posts
      mixin sub-post(sp, i)

mixin sub-post(sp, i)
 .sub-post(id="sub_post_#{sp.id}", class=(i % 2) ? 'odd' : 'even')
    p.body= sp.body
    .signature
      span.username - #{sp.user.name}
      span.date= sp.date

//- main
//- ---------
block header
  h1.logo Power
    strong Bulletin
  block categories
    //- TODO dynamic, customizable forum & sub-forum menu for this bulletin
    menu.menu
      li.row
        a.title.forum-1.active(data-menu=1, href='#forum-1') Forum
        menu.submenu
          li.row Sub-forum
          li.row Sub-forum
          li.row Sub-forum
      li.row
        a.title.forum-2(data-menu=2, href='#forum-2') Forum 2
        menu.submenu
          li.row Sub-forum
          li.row Sub-forum
      li.row
        a.title.forum-3(data-menu=3, href='#forum-3') Forum 3
        menu.submenu
          li.row Sub-forum
      li.row
        a.title.forum-4(data-menu=4, href='#forum-4') Forum 4
        menu.submenu
          li.row Sub-forum
  .search
    input#query.query(type='text', placeholder='Search')

block left
  //-{{{ data-fid is how we pass in the forum id of the post, this way
  //- we can put a hotlink wherever without having to write new
  //- javascript (other than calculating the fid)
  //- TODO move this into posts :hover tools }}}
  div
    a(href='#', class='onclick-add-post-dialog', data-fid=33) Add Post
      i !

  .user-profile
    .photo
      img#user-photo

block content-stream
  each f,i in forums
    mixin forum(f, i)

block footer
  h6
    small &copy; 
    | #{site_name} &nbsp;
    b= new Date().getFullYear()

//- vim:fdm=marker
