
mixin forum(f, i)
  h3.title Forums
    //-a.mutant(href=f.uri)= f.title
  if f.forums
    ul.forum(class="#{f.classes || ''} forum-#{activeForumId}")
      each sf,ii in f.forums
        mixin subforum(f, sf, ii)

mixin subforum(f, sf, i)
  //-.subforum(class="#{(i % 2) ? 'odd' : 'even'}")
  li
    a.mutant.title(href=sf.uri)= sf.title

mixin thread(f, t, i)
  li
    h4.title
      a.mutant(href=t.uri)= t.title

//- main
//- ---------
//-if forums
//-  each f,i in forums
//-    mixin forum(f, i)

//-if threads
//-  each t,i in threads
//-    mixin thread(t, i)

//-h3.title Threads
#handle.handle
.create
  a(class='button onclick-add-post-dialog') Create Thread

//- XXX - && typeof(forums) !== 'undefined' is a temporary hack to get the page to load
if typeof(forums) !== 'undefined' && forums
  each f,i in forums
    if f.posts
      ul.threads
        each t,ii in f.posts
          mixin thread(f, t, ii)

//- vim:fdm=marker
