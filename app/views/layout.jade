!!! 5
html
  | <!--
  | ⣏⡱ ⢀⡀ ⡀ ⢀ ⢀⡀ ⡀⣀ ⣏⡱ ⡀⢀ ⡇ ⡇ ⢀⡀ ⣰⡀ ⠄ ⣀⡀
  | ⠇  ⠣⠜ ⠱⠱⠃ ⠣⠭ ⠏  ⠧⠜ ⠣⠼ ⠣ ⠣ ⠣⠭ ⠘⠤ ⠇ ⠇⠸ -->
  head
    if typeof(title) !== 'undefined'
      title= title
    if typeof(meta_description) !== 'undefined'
      meta(name='description',content=meta_description) 
    if typeof(meta_keywords) !== 'undefined'
      meta(name='keywords',content=meta_keywords.join(', '))
    if typeof(meta_zipcode) !== 'undefined'
      meta(name='zipcode',content=meta_zipcode)
    meta(http-equiv='X-UA-Compatible',content='IE=EmulateIE9,chrome=1')
    meta(name='robots',content='index, follow')
    meta(name='apple-mobile-web-app-capable', content='yes')
    meta(name='apple-mobile-web-app-status-bar-style', content='black')
    meta(name='viewport', content='user-scalable=0, initial-scale=1, maximum-scale=1, width=device-width')

    //- links first
    link(href="#{cacheUrl}/images/favicon.ico",rel='shortcut icon',type='image/x-icon')
    link(href="#{cache2Url}/images/apple-touch-icon.png", rel='apple-touch-icon')
    link(href="#{cache3Url}/images/apple-touch-icon-72x72.png", sizes="72x72", rel='apple-touch-icon')
    link(href="#{cache4Url}/images/apple-touch-icon-114x114.png", sizes="114x114", rel='apple-touch-icon')
    link(href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400', rel='stylesheet', type='text/css')
    if cssUrls
      for obj in cssUrls
        link(rel='stylesheet',type='text/css',href=obj.url)
    link(href="#{cache5Url}/domains/#{currentDomain}/site.css", rel='stylesheet', type='text/css')

    //- the only .js in our <head> 
    if cvars.env != 'production'
      script(type='text/javascript', src="#{cache5Url}/local/head-0.99.load.min.js") //- offline
    else
      script(type='text/javascript', src="//cdnjs.cloudflare.com/ajax/libs/headjs/0.99/head.load.min.js")
    if jsUrls
      |<script type="text/javascript">
      |  window.initialMutant = !{JSON.stringify(initialMutant)};
      |  window.cacheUrl = !{JSON.stringify(cvars.cacheUrl)};
      |  head.js.apply(head, !{JSON.stringify(cvars.baseJsUrls.concat(jsUrls))});
      |</script>

  body
    header.header.toggler
      h1.logo
        a.mutant(href='/') Power
          strong Bulletin
      .container
        menu.menu
          each f,i in menu
            li.row
              a.title(data-surf=f.id, data-scroll-to="#forum_#{f.id}", class="forum-#{f.id}", href="/#{f.slug}")= f.title
              .submenu
                menu
                  if f.forums
                    each sf,i in f.forums
                      li.row
                        a.mutant(class="forum-#{sf.id}", href=sf.uri)= sf.title
        menu.tools
          li.onclick-login
            a(href='/auth/login') Login
          li.admin-only
            a.mutant(href='/admin') Admin
          li
            a.mutant.onclick-profile(href='/users') Profile
          li.onclick-logout
            a(href='/auth/logout') Logout
        .search
          input#query.query(type='text', placeholder='Search', autocomplete='off')
        .onclick-close.toggler(title='Close!') x

    section#left_content
      #handle.handle(title='Toggle')
      #left_container
      #paginator(title='Go to this Page')
        if typeof page == 'number'
          if page != 1
            if page != 2
              a.page.previous(title='Previous Page', href="#{furl.threadUri}/page/#{page - 1}") 
            else
              a.page.previous(title='Previous Page', href="#{furl.threadUri}") 
          else
            a.page.previous(title='Previous Page', href="#{furl.threadUri}", style="display:none;") 

          .current(title='Drag to Page through')
            .tooltip.right

          if page != pagesCount
            a.page.next(title='Next Page', href="#{furl.threadUri}/page/#{page + 1}") 
          else
            a.page.next(title='Next Page', href="#{furl.threadUri}/page/#{pagesCount}", style="display:none;") 
        else
          a.page.previous(title='Previous Page', href="/", style="display:none;") 
          .current(title='Drag to Page through')
            .tooltip.right
          a.page.next(title='Next Page', href="/", style="display:none;") 

    section#main_content.container

    section.extra

    section#auth(style="display:none;")
      include _auths

    //- for mocha testing
    if cvars.env != 'production'
      #mocha

    footer
      h6
        small &copy; #{siteName} &nbsp;
        b= new Date().getFullYear()
    #chat_drawer

    //- css not required for initial page render -- performance mod.
    link(href="#{cache5Url}/local/jquery-ui.min.css", rel='stylesheet', type='text/css')
