
// Structure applied to ...
bounce = cubic-bezier(0,1.72,0,.75)

// Mutant-specific States
html.homepage, html.profile, html.admin, html.moderation, html.search, html.page
  // restore footer
  .PostDrawer
    display none
  footer.expanded
    box-shadow 0 0 4px -1px theme_color!important
    max-height 39px!important
    height 36px!important
    .onclick-scroll-top
      margin-top 0
    .ui-resizable-handle
      display none
//{{{ - homepage
// XXX add html. selector here for any single-column layout & the leftnav will animate out, etc...
html.homepage, html.page, html.moderation
  .left-content
    transform translateX(-600px)
    opacity 0
    transition all .08s ease-in
html.homepage
  .main-content
    width 94%
    padding-top (header_height+50)
    margin 0 auto
    margin-left 6%
    .homepage
      width 93%
      margin-bottom (grid*9)
  footer
    left 0!important
//}}}
//{{{ - homepage & forum
html.forum .homepage .forum > .title
  display none
html.homepage, html.forum
  .main-content
    .forum.homepage
      .post
        margin-bottom (grid*2)
        .body
          overflow hidden
        .profile.photo
          height 45px
          width 45px
      .subpost
        .username
          display none
//}}}
//{{{ - forum, profile, search & moderation
html.forum, html.profile, html.search, html.moderation
  body.scrolled
    .left-content
      bottom 0
  body.paginator
    .left-content
      .create
        margin (grid/2) (grid*2.5) (grid/2) (grid*3.5)
  .left-content.wide
    #left_container
      .create
        .button
          font-size 1.1em
      .threads .thread .container
        .username
          position relative!important
          margin-left 8px!important
          color #333!important
        .created
          opacity 1
          display none
  #left_content
    transform translateX(0)
    opacity 1
    transition opacity .3s cubic-bezier(1,.01,.69,1)
    #thread-paginator
      margin 12px 0 0 0
      text-align center
    .photo
      display none
    .photo
      margin 5px 11px 7px 0
    .create
      margin (grid/2) (grid*3.5) (grid/2) (grid*3.5)
      .button
        width 100%
        text-overflow ellipsis
        font-size .9em
        display block
        padding 8px 10px
    .scrollable
      padding-top grid
      overflow hidden
      overflow-y scroll
      height 100%
    .threads
      list-style-type none
      height 100%
      margin 0
      padding-top grid
      .thread
        position relative
        padding 0 38px 8px 38px
        .title
          margin 7px 0 0 0
          text-transform capitalize
        .container
          margin 0
          padding 0
          .clear
            clear right
          .mutant
            display block
            border none
            outline none
            animation-name none
          .title
            overflow hidden
            max-height 65px
            text-transform capitalize
            margin grid grid 0 -5px
            padding 1px 5px 0 3px
          .username
            margin-right 5px
            font-size .7em
            em
              text-transform capitalize
              font-weight 600
              margin-left (grid/2)
              font-size 1.1em
          .created
            font-size .8em
            font-weight 200
            display none
          .clear
            margin-top -5px
          .created, .username, .post-count
            white-space nowrap
            text-overflow ellipsis
            margin-bottom -6px
          .username
            position absolute
            right 12px
            color #999
            font-weight 300
          .post-count, .views
            font-weight bold
            font-size .8em
          .post-count, .views
            i
              font-weight 100
              font-size .9em
              margin 0 grid 0 (grid/2)
        .sticky-toggle
          display none
      .pad
        height grid*8
    .threads.admin
      .thread
        .sticky-toggle
          position absolute
          display block
          top 10px
          right 32px
          cursor pointer
          // off
          filter hue-rotate(sprite_hue)
          background url(cache-url + '/images/sprites.png') no-repeat -126px -54px
          height 14px
          width 10px
          &:hover
            background url(cache-url + '/images/sprites.png') no-repeat -149px -54px
        .locked-toggle
          position absolute
          display block
          top 10px
          right 16px
          cursor pointer
          // off
          filter hue-rotate(sprite_hue)
          background url(cache-url + '/images/sprites.png') no-repeat -138px -54px
          height 14px
          width 10px
          &:hover
            background url(cache-url + '/images/sprites.png') no-repeat -161px -55px
      .thread.sticky
        .sticky-toggle
          // on
          filter hue-rotate(sprite_hue)
          background url(cache-url + '/images/sprites.png') no-repeat -149px -54px
          height 16px
          width 10px
          top 11px
      .thread.locked
        .locked-toggle
          position absolute
          display block
          top 11px
          // on
          content ''
          filter hue-rotate(sprite_hue)
          background url(cache-url + '/images/sprites.png') no-repeat -161px -55px
          height 14px
          width 10px
  #left_chrome
    display none
  .main-content
    overflow hidden
    .social
      position absolute
      overflow hidden
      right (grid*1.5)
      bottom -32px
      height 25px
      min-width 200px
      max-width 300px
      div
        max-width 95px!important
        vertical-align top
        overflow hidden
      div:last-child
        max-width 59px!important
      > iframe
        max-width 90px!important
      .fb_iframe_widget
        margin-right 16px!important
        margin-top -1px!important
        vertical-align top
    .forum, .search
      position relative
      clear both
      margin-bottom 250px
      margin-left 50px
      h2
        position relative
        font-weight 200
        font-size 1.8em
        margin 2px 0 17px 5px
        padding-bottom 15px
        text-transform capitalize
        .reply-context
          position absolute
          top -30px
          left 0
          font-size 0.6em
      p
        margin 1em 0
      .container
        z-index 6
      .scroll-to
        position absolute
        right 0
        bottom -30px
      #post_new
        display none
      #post_edit
        width 80%
        .summary
          display none
        .photo
          margin 4px 9px 1px 1px
        .title
          margin-bottom 8px
        .button
          right 5px
          visibility hidden
      .post-edit:hover
        transition none
        .close
          opacity 1
          transition none
      .reply
        margin-left 172px
        width 405px
        .post-edit form
          clear both
          vertical-align top
          margin -25px 0 30px 0
          .close
            right -9px
            top -10px
          .summary
            vertical-align top
            display inline-block
            .photo
              margin-top 3px
          textarea
            height 22px
            min-height 22px
            width 320px
            margin-top 7px
            vertical-align top
            display inline-block
          button
            display none
            bottom 46px
            right 8px
            height 27px
            font-size 15px
            font-weight 200
            padding 0 6px
            z-index 100
            position relative
      .post-edit
        position relative
        margin-bottom (grid*2)
        .tooltip
          bottom 85px
        form
          position relative
          text-align right
        .button
          position absolute
          z-index 15
          padding 2px 5px
          font-size 1em
          height 26px
          right -14px
          bottom 9px
          left auto
        .close
          opacity 0
          right -7px
          top 34px
          position absolute
          z-index 100
          transition opacity .2s ease-out .4s
        .summary
          transition all .2s ease-out .4s
          .profile.photo
            margin-left 3px
            height 45px
            width 45px
            margin-top (grid/2)
          // arrow
          &::before:hover
            margin-left 2px
          &::before
            position absolute
            z-index 1
            content ''
            top 19px
            height 0
            width 0
            border-bottom 7px solid transparent
            border-right 7px solid transparent
            border-top 7px solid transparent
        .title
          display block
        textarea.body
          vertical-align top
          width 102%
          min-height 40px
          resize vertical
          display block
          margin grid 0
          min-height 40px
      .post.censored
        .onclick-censor-post
          display none!important
        .onclick-uncensor-post
          display inline-block!important
      .post.moderation
        margin-left 103px
        margin-right 200px
        .s-chat-bubble
          // color #e1c6c6
        .container,.container:hover
          box-shadow 1px 1px 2px 1px rgba(255,0,0,0.2)
        .actions
          display none
      .post.head
        padding-top (grid/2)
        position relative
        > .title
          padding-bottom 25px
          font-weight 500
          border-bottom 1px solid rgba(0,0,0,.15)
        .post-reply
          position absolute
          right 69px
          top 35px
          left auto
          font-size .9em
          color dark_text
      .post
        position relative
        clear both
        margin-right (grid*4)
        padding-top (grid*2)
        margin-bottom (grid*2)
        .post-content
          img
            max-width 100%
        .actions
          transition .1s ease-out
        &:hover
          position relative
          z-index 4
          .actions
            opacity 1
            transition none
        &:first-child
          padding-top (grid*1.5)
        .breadcrumb
          margin-bottom (grid*2)
          span, em
            display none
        .profile-container
          position absolute
          width 200px
          text-align right
          margin-left -60px
          .user-title
            text-transform capitalize
            font-style italic
          .user
            clear both
            font-weight bold
            position relative
            .profile
              width 80px
              height 80px
              margin-bottom (grid)
              margin-right -5px
              float right
              img
                max-width 100%
            .username
              clear both
              display block
          .date
            clear both
            font-size .8em
            color #999
            padding-left 13px
            display block
            text-indent 1px
            margin-top -1px
            font-weight 200
            b
              font-size 1em
            &.created
              color #888
              font-weight 500
              b
                text-transform capitalize
                color #777
                font-weight 400
            b
              color #666
              font-weight 300
        .container
          position relative
          margin-left 185px
          margin-bottom 35px
          padding 23px 30px 30px 35px
          min-height 105px
          border-bottom-right-radius 35px
          border-bottom-left-radius 35px
          border-top-right-radius 35px
          transition box-shadow .1s ease-out .1s
          &:hover
            box-shadow 1px 1px 2px 1px rgba(0,0,0,.06)
            transition none
          .s-chat-bubble
            position absolute
            top 0
            left -34px
          .title
            overflow hidden
            text-overflow ellipsis
            line-height 1em
            margin-top -4px
            margin-right 67px
            margin 0 0 15px -1px
            padding-bottom 15px
            font-size 1.8em
            color #444
            border-bottom 1px solid #eee
            text-transform capitalize
          textarea.body
            font-size 1.1em
          .body
            color #444
            line-height 1.5em
            clear both
            font-size 1.05em
          .sig
            font-size .85em
            color #999
            border-top 1px solid rgba(0,0,0,.15)
            max-width 75%
            margin-top 20px
            padding-top 10px
            // the idea is to not let users uglify their sigs
            hr
              display none
            img
              max-width 80%
              max-height 125px
        .title, .user
          font-weight 400
          text-transform capitalize
        .actions
          opacity 0
          position absolute
          left 200px
          bottom -26px
          padding-top 20px
          z-index 9
          a
            text-indent 20px
            vertical-align bottom
            font-size .9em
            font-weight 400
            margin-right 12px
            margin-left -1px
            display inline-block
            animation-name none
            // div is the sprite icon
            div
              position absolute
              bottom 0
              margin-left 1px
            .s-edit
              margin-left 4px
              bottom 3px
            .s-permalink
              margin-left 3px
            &:hover
              text-decoration none
          .edit, .censor, .uncensor
            display none
      .page-loaded:last-child, #listview div[data-infinity-pageid]
        padding-bottom (grid*4) !important
      .children
        font-size .95em
        .profile-container .user
          .profile.photo
            width 60px
            height 60px
        .container
          min-height 90px
          // slightly lighter & smaller
          .sig
            font-size .8em
            color #aaa
            max-width 55%
            margin-top 10px
            padding-top 5px
            img
              max-height 100px
        .children
          margin-left (grid*3.5)
          .load-more
            width 100%
            text-align center
            display block
            color dark_text
          .post
            padding-top 0
            .container, .actions
              margin-left 35px
            .container
              min-height 48px
              margin-left 227px
              padding 25px 37px 0 37px
              .post-content
                .body
                  line-height 20px
                  margin 0
                  padding-bottom 20px
            .button
              bottom 19px
            .profile-container
              margin -11px 0 0 -42px
              .user
                display inline-block
                font-size .92em
                margin-top -5px
                .profile.photo
                  position absolute
                  font-weight bold
                .username
                  margin 10px 12px 0 0!important
              .user-title
                display none
              .date
                margin 7px -36px 0 0
                display block
                font-size .95em
              .profile
                width 35px
                height 35px
       .post-bottom + .social
         bottom 25px
         right 55px
  footer.thread
    .post-new
      .title
        display block
        border 1px solid #eee
        background #f8f8f8
        background-image none
        box-shadow none
        font-size 1.1em
        top -5px
        height 6px
        &:focus
          top -6px
          transform none
          background #f8f8f8
          box-shadow none
          border none
          height 12px
          font-size 1.15em
//}}}
//{{{ - profile
html.profile
  // hide Back button on "change password" dialog
  .change-tooltip
    top 21px
    left auto
    right 37px
    bottom auto
  #auth .forgot .msg.onclick-show-login
    display none
  .left-content.editable
    background lighten(theme_color, 98%)!important
    .avatar
      img
        cursor copy
    .change-profile, .onclick-show-forgot, .onclick-change-sig, .change-title
      opacity 1
      display block
      height auto
      width auto
      text-indent 3px
      font-size 1em
      transition opacity .3s ease-out
    h3, .onclick-chat, .title
      display none
    .onclick-change-sig
      opacity 1
  .left-content
    max_width = 225px
    .onclick-chat
      margin 8px 3px
      max-width 250px
      width 98%
    h1, h2, h3
      text-transform capitalize
      margin-top 0
      margin-left 0
    h2
      margin 15px 0 5px 3px
    h3
      padding 0 4px
      font-size 1.1em
      font-weight normal
    h3, .change-title
      text-transform capitalize
      margin 3px 0 9px 0
    .change-title
      display none
      margin-left 2px
      padding 6px 4px
      width 92%!important
      max-width 210px !important
    .container
      margin 0 (grid*3.5) 0 (grid*4)
      overflow hidden
      button
        margin 12px 2px 2px 2px
    .avatar
      position relative
      overflow hidden
      // keep aspect
      max-width max_width
      max-height max_width
      .drag
        display none
      img
        width 100%
    ul
      margin 10px 3px
      font-weight 300
      color #777
      li
        margin-bottom 3px
        b
          color #444
          font-weight 400
        .date
          display inline-block
    .profile-actions
      position relative
      margin-top 25px
      max-width max_width
      &::before
        content ''
        position absolute
        top -12px
        left 0
        right 0
        height 1px
        background-color #eee
    .change-profile, .onclick-show-forgot, .onclick-change-sig
      opacity 0
      font-size 0
      display block
      height 0
      width 0
      margin 3px 0
  .main-content
    .forum
      .overview
        text-transform capitalize
        margin -14px 0 20px -5px
        color #555
        font-size 1em
        border-bottom 1px solid #ddd
        padding-bottom 7px
        .right
          color #999
          float right
          font-size .95em
          margin-right 5px
          font-weight 300
          b
            font-weight 500
            span
              font-weight 300
      .heading
        margin grid 0 grid 0
        padding 0
        font-size 1em
        color #000
        text-transform none
        .title
          margin 0 1px 0 6px
          padding 1px 3px 3px 0
          font-size 1.12em
          &:hover
            text-decoration none
          b
            font-weight 400
            text-transform capitalize
        .by, .forum-link
          margin-right 1px
          font-size .8em
          font-weight 500
          b
            font-size 1.1em
      .reply
        .summary
          .profile
            display block
      .post
        padding-top 0
        margin-left (grid/2)
        margin-top 2px
        .user-title
          display none
        b
          margin-left 1px
        > h4.title
          font-size 1.4em
          letter-spacing -1px
          display none
        .body
          margin-top 0
        .profile
          display none
        .container
          .username
            display none
          .date
            margin 0 grid grid 0
            padding 0
            font-weight 200
            font-style italic
            font-size .95em
            color #222
            display inline-block
            b
              font-weight 200
  ul
    list-style none
    margin grid 0 0 0
//}}}
//{{{ - search
html.search
  #left_container 
    h1, h2, h3, h4
      margin 11px 0
      color #555
    #search_filters, #search_facets
      padding 0 15px
      select
        max-width 100%
    #facets
      .facet-title
        font-weight bold
      a.facet-hit
        display block
    .facet
      a
        animation-name none
        display block
    a.facet-hit
      display block
      em
        font-size .9em
        color #555
        width 40px
        display inline-block
  .main-content
    #hit_count
      color #888
      font-size .8em
      border-bottom 1px solid #ccc
    // setup default
    #new_hit_count
      display none
      font-size 1.2em
      font-weight 300
      p
        display inline
        margin-left 8px
        font-style italic
        font-size .75em
        .count
          margin 0 3px
    // new posts look slightly different on search page
    #new_posts
      .post
        h4
          padding 10px 5px
          border-bottom 3px solid #F38437 !important
        h4:after
          content: " ( New! )"
    #breadcrumb
      display none
    .search
      h4
        margin 12px 0
  header
    .search
    .container
      .search
        #query.query
          position relative
          z-index 9
        .onclick-close
          opacity 1!important
          top 6px
          height 12px
          width 12px
          border-radius 12px
      .advanced
        right 80px
        top (header_height + 5)
        transition right .2s ease-out
        .check, label
          cursor pointer

    h2.title
      font-size 1em
      text-overflow ellipsis
      max-height 20px
      overflow hidden
//}}}
//{{{ - admin
html.admin
  .col1
    width 490px
  .left-content
    max-width 150px
    background-color #fafafa
    .handle
      display none
    #left_container
      .sites
        position absolute
        margin-left 0
        bottom 20px
        font-size .9em
        font-style italic
        font-weight 400
        overflow hidden
        color #444
        cursor pointer
        background-color #fff
        padding 5px 30px
        max-width 88px
        max-height 20px
        display block
        z-index 10
        &:hover
          color #333
          max-width 160px
          max-height 600px
          .dialog
            max-height 600px
            transition max-height .2s ease-out .3s, padding .1s ease-out .3s
        .dialog
          max-height 0
          border-radius 5px
          min-width 175px
          transition max-height .1s ease-out .2s
        a
          display block
          font-size .8em
          padding-botom 2px
      menu
        float right
        list-style none
        padding 18px
        margin 28px 0 0 3px
        transition all .2s ease-out
        li.active
          a
            right 6px
            transition right .15s ease-out
        li
          padding 4px 12px 4px 5px
          margin-bottom 8px
          text-align right
          width 90px
          margin-right grid
          position relative
          a
            position absolute
            right 10px
            font-size 1.3em
            animation-name none
  .main-content
    padding-left 200px
    padding-bottom 50px
    button.name
      margin 0
      position absolute
      top 7px
      height 38px
      right 31px
      width 56px
      font-size .9em
      line-height 0
      text-indent 0
      padding 0
      z-index 20
    label .note
      left 189px
    .note
      color #aaa
      font-size .75em
      position absolute
      margin-top -4px
      left 163px
      &.below
        margin-top 14px
      a
        margin 0 6px
      b
        color dark_theme_color
        margin-left 3px
    .menus
      .col1, .col2
        float left
    .theme
      position relative
      .onclick-close
        position absolute
        z-index 1
        right -115px
        top 187px
        display none
        opacity 1
      .color-picker
        position absolute
        right -107px
        top -5px
        display none
      label.expanded ~ .color-picker
        display block
        margin-top 205px
      .preview
        cursor pointer
        position absolute
        top -11px
        right -45px
        display inline-block
        width 34px
        height 34px
        border 1px solid #ddd
        border-radius 4px
        margin-left 8px
        &:hover
          border 1px solid #bbb
        .s-dark-chat
          margin 9px
    .domains
      button[type="submit"]
        margin-top -10px!important
      form
        fieldset
          padding grid (grid*3) grid (grid*8.5)
          margin (grid*3.5) (grid*2) (grid*3) 0
        img
          position absolute
          top -(grid*4)
          left 0
        label
          font-weight 300
          position absolute
          left 20px
          margin-top 8px
        input.first
          background #fff
          border-bottom-right-radius 0
          border-bottom-left-radius 0
        input:last-child
          border-top-right-radius 0
          border-top-left-radius 0
        input
          display block
          min-width 400px
          margin-bottom -1px
      fieldset
        .break
          padding-bottom 3px
      .domain
        max-height 75px
        margin-left 41px
        .note
          font-size .65em
          margin-top 1px
          left 96px
        #custom_domain
          display block
          margin 0 0 5px 12px
          width 360px
          border-top-right-radius 8px
        button
          position absolute
          z-index 25
          margin 0
          padding 0
          top 69px
          right 100px
          height 37px
          width 67px
          font-size 1em
          line-height 16px
        .q
          position absolute
          top 75px
          right 180px
          line-height 21px
          background-color #fff
          z-index 30
          border 1px solid @background-color
          padding 1px 4px
          border-radius 100%
          cursor default
          &:hover
            color #000
            border 1px solid #eee
            .message
              max-height 999px
              padding 5px 20px
              transition max-height .1s ease-out .5s, padding .1s ease-out .5s
          .message
            cursor pointer
            position absolute
            z-index 30
            max-height 0
            top -36px
            left -342px
            width 475px
            overflow hidden
            color #444
            background-color #f4f4f4
            border-radius 15px/10px
            transition none
            h5
              text-transform capitalize
            h5, p
              margin 0
              padding 0
            a
              margin-left 4px
              color #000
            b
              margin-left 4px
              font-style italic
              color dark_text
    form
      height 300px
      margin-top (grid*2)
      max-width 1300px
      position relative
      select
        margin 10px 0
      .emails
        width 305px
      .posts-per-page
        width 40px
      .domain
        display block
        font-size 1.2em
        select
          margin 0 0 0 10px
        label
          position relative
          display inline-block
          font-size 1em
          width 150px
          left 0
      label
        width 150px
        font-weight 300
        font-size 1.1em
        display inline-block
        vertical-align top
        margin-top grid
      .break
        padding-bottom (grid*2.5)
        clear both
      .break.double
        padding-top (grid*2.5)
      .collapse
        display none
      .collapse ~ label
        display block
        min-width 565px
        position relative
        margin-top grid
        margin-bottom 0
        margin-left -10px
        border-bottom 1px solid #eee
        background-color lighten(theme_alpha, 50%)
        overflow hidden
        h4
          cursor pointer
          padding-top 20px
          padding-bottom 20px
          top 0
          left 0
          margin -10px
          color dark_text!important
          letter-spacing 1px
          text-align center
          font-weight 200
          width 100%
        .dialog
          max-height 0
          padding 0 35px 5px 35px
          overflow hidden
          font-size .8em
          transition max-height 0 ease-out .3s
          p
            font-size .9em
            margin grid 0 5px grid
          .hue-selector
            position absolute
            border none
            display none
            height 33px
            width 122px
            bottom 0
            right -180px
            overflow hidden
          .plus-minus
            display inline
          for num in (1..122)
            .hue-{num}
              $x = -((num))px
              background url(cache-url + '/images/sprites.png') no-repeat $x -27px
              filter hue-rotate(num*3 deg)
              display inline-block
              height 100%
              width 1px
          button[type='submit']
            margin 15px 0 10px 150px
            width 200px
      // this label toggles the .dialog
      .collapse + label
        border-left 1px solid transparent
      .collapse + label:hover
        border-bottom 1px solid darken(theme_alpha, 75%)
        border-left 1px solid darken(theme_alpha, 35%)
      // for expansion
      label.expanded, .collapse:checked + label
        border-top 1px solid #eee
        border-left 1px solid #dfdfdf
        background-color #fdfdfd
        h4
          color #333!important
        legend
          color #555!important
        .dialog
          max-height 750px
          padding-bottom (grid*1.5)
          transition all .2s ease-out
      fieldset
        //padding grid (grid*3) grid (grid*4)
        border 0
        margin -(grid*2) 0 (grid*3) 0
        display inline-block
        position relative
        fieldset
          font-size .8em
          input
            font-size 1.1em
            width 165px
          .note
            left 160px
        img
          display block
        select
          padding 5px
        legend
          font-weight 100
          font-size 1.4em
          position absolute
          top 10px
          left 55px
          label
            font-size .95em
          a
            font-weight 400
            font-size .9em
            cursor help
            &:hover
              text-decoration none
        input
          width 300px
        textarea
          width 305px
          height 100px
          font-size 1em
        #admin_chat:checked + label:after, #newsletter:checked + label:after, #facebook_auth:checked + label:after, #twitter_auth:checked + label:after, #google_auth:checked + label:after, #linkedin_auth:checked + label:after, #invite_only:checked + label::after, #private:checked + label::after, #social:checked + label::after
          content 'On'
        #admin_chat + label:after, #newsletter + label:after, #facebook_auth + label:after, #twitter_auth + label:after, #google_auth + label:after, #linkedin_auth + label:after, #invite_only + label::after, #private + label::after, #social + label::after
          content 'Off'
      button
        display block
        width 420px
        height 40px
        margin-top 35px
        margin-left 85px
        margin-bottom 50px
      span
        color #888
        font-size 18px
        font-weight 200
        line-height 47px
        label
          width 60px
    .menu-link
     margin 0 95px 40px 0
     display block
     color dark_theme_color
     font-size .9em
     animation-name none
  .question
    display block
  footer
    left 150px!important
//}}}
//{{{ - forum
html.forum
  .main-content
    opacity 1
    transition opacity .15s
    &.transparent
      opacity 0
      transition none
    .post-reply.onclick-footer-toggle:hover
      transition none
    .post-reply.onclick-footer-toggle
      //transition all .5s ease-out .5s
      position relative
      display block
      cursor pointer
      font-weight 200
      margin 0 auto
      margin-bottom 30px
  // reply button
  .post-reply
    display none
    cursor pointer
    position absolute
    z-index 9
    padding-right 20px
    left 22px
    top 4px
    color #666
    background-color #bbb
    background-image linear-gradient(to bottom, theme_color 0px, theme_color 100%)
    border 1px solid rgba(255,255,255,.4)
    border-radius 30px
    width 5px
    height 24px
    color dark_text
    .s-reply
      opacity .9
    &:hover
      .s-reply
        opacity 1
    &::after
      position absolute
      content 'Reply'
      padding-left 20px
      left 12px
      top 0
  footer
    cursor n-resize
    .onclick-footer-toggle
      display block
    .post-container
      cursor default
      position absolute
      top 0
      bottom 0
      left 10%
      opacity 0
      margin 0 auto
      width 80%
      margin-top 30px
      form
        position relative
        text-align left
        .title
          width 60%
          display none
        .title:focus
          transform none
        .tooltip
          bottom auto
          top 15px
        button
          position absolute
          right 12px
          bottom 32px
        .summary
          .profile.photo
            position absolute
            top -51px
            left 5px
            height 45px
            width 45px
    &.expanded
      background-color rgba(250,250,250,.5)
      cursor s-resize
      height 320px
      left 0!important
      transition height .3s bounce
      .post-reply
        margin-top 8px
        left 39px
        &::after
          content 'Close'
        &:hover::before
          border 4px solid transparent
          border-top 8px solid #aaa
          top 8px
          left 36px
        &::before
          border 4px solid transparent
          border-top 6px solid #ccc
          top 9px
          left 36px
      h6
        display none
      .post-container
        opacity 1
        margin-top 10px
        transition margin-top .3s ease-out .1s, opacity .4s ease-out .1s
//}}}
html.page
  //background-image linear-gradient(to top, rgba(255,255,255,0) 50px, theme_alpha 100%)
  body
    .main-content
      padding grid grid (grid*3) grid
      margin 125px 75px 75px 0
      opacity 0
      .social-right > .social
        top -5px
        right 60px
      .social-center > .social
        position relative
        margin 30px auto
        right auto
        left auto
      .social
        position absolute
        right 46px
        overflow hidden
        height 25px
        min-width 200px
        max-width 300px
        div
          max-width 95px!important
          vertical-align top
          overflow hidden
        div:last-child
          max-width 59px!important
        > iframe
          max-width 90px!important
        .fb_iframe_widget
          margin-right 16px!important
          margin-top -1px!important
          vertical-align top
      .button
        text-decoration none
        font-style italic
        font-weight bold
        font-size 1.2em
        padding 13px 30px
        color colored_text
        margin-top 12px
        display inline-block
        &:hover
          box-shadow 0 0 5px #bbb,0 1px 10px 2px theme_color
          transform scale(1.05)
          transition none
      .hdn
         display inline-block
         text-indent -9000px
      .offer
        margin 20px auto 0 auto
        max-width 50%
        text-align center
        &:hover
          h2
            text-shadow 0 0 1px theme_color
            color #000
            transform scale(1.005)
            transition none
          img
            //animation-name popin
            //animation-duration .9s
            //animation-delay .01s
            transform scale(1.01)
            transition none
            outline-color rgba(theme_color, .3)
          article
            color #222
          table
            color #222
            border 2px dashed rgba(theme_color, .2)!important
          .button
            animation-name tada
            animation-duration .2s
        .button
          width 300px
          margin auto
        .side-by-side
          width 100%
          height 385px
          clear both
          .video
            float left
            width 50%
        .video
          position relative
          z-index 1
          margin 20px 0
          transform scale(1)
          //transition all .3s ease-in
          box-shadow 0 0 0 2px theme_color
          &.big
            margin-left -12px
          &:hover
            z-index 2
            transform scale(1.01)
            transition none
            box-shadow 0 0 4px 2px theme_color
        h2, h3, article
          color #333
          margin 0
        h2
          color dark_text
          transition all .3s ease-in
        h3
          color #222
          margin-left 2px
          font-size 1.4em
          transition all .3s ease-in
        h2, h3
          text-transform capitalize
          text-align center
          margin 0
        article
          color #555
          margin-left 2px
          margin 15px 0
          text-align left
          transition all .3s ease-in
          table
            border 2px dashed rgba(theme_color, .1)!important
            width 100%
          p
            text-align justify
            vertical-align top
          &:first-letter
            line-height .8em
            vertical-align top
            padding-top 4px
            padding-right 2px
            font-size 1.6em
            color dark_text
        img
          position relative
          z-index 10
          padding 5px
          background theme_color
          border-radius 3px
          outline 7px dashed rgba(theme_color,.1)
          border 15px solid #fff
          box-shadow 0 0 1px theme_color
          margin 25px 0
          transition all .3s ease-out
        p
          margin 24px 2px
        a
          display block
          &:hover
            text-decoration none
      .grid50
        float left
        width 50%
      h2
        font-size 2.3em
        line-height 1.2em
        margin-top 0
        margin-bottom 12px
        font-weight 200
        color dark_text
      h3
        color #444
        margin-top -12px
        letter-spacing 2px
        margin-bottom 12px
        font-size 1.6em
        line-height 1.5em
        font-weight 200
    &.loaded
      .main-content
        opacity 1
        animation-name zoomInDown
        animation-duration .4s
        //transition opacity .5s ease-out
    &.minimized
      header
        transform translateY(-99px)
        transition all .3s ease-out .2s
      .social-right > .social
        top -100px
      .opener
        cursor pointer
        height 50px
        width 75px
        top -29px
        margin-left -40px
        transition top .4s ease-out
        &:hover
          top -27px
          transition top .1s ease-in
          border-color theme_color
          background radial-gradient(circle closest-corner at 50% 50%, rgba(theme_color,.2) 50%, rgb(250,250,250) 100%)
          &:after
            border-top 15px solid theme_color
        // downward-facing arrow
        &:after
          content ''
          position absolute
          height 0
          width 0
          top 25px
          left 26px
          border 10px solid transparent
          border-top 13px solid dark_theme_color
      .offer
        margin-top -30px
    footer
      left 0!important
html.forum.new
  .main-content .forum #post_edit .summary
    display block
    .photo.online
      display none
html.forum
  body.locked
    .create
      visibility hidden!important
    .reply, .post-reply, [title=Reply], [title=Comment]
      display none !important
html.moderation
  h2
    margin 20px 88px
  .forum
    padding-left 40px
  #left_content
    display none
  #main_content
    .actions
      .censor, .uncensor
        display none
  footer
    left 0!important

// <mutant layout defaults> {{{
// so social embedded iframes don't affect our dom
iframe[id^="oauth2relay"]
  position fixed!important
  width 0!important
  height 0!important
.post-bottom
  clear both
  margin-bottom (grid*7)
#left_container
  height 100%
  overflow hidden

footer
  .post-reply
    display none
//}}}

// vim:fdm=marker
