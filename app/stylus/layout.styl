@import 'common'

// XXX below defines the layout's skeleton
// XXX decoration & embellishments belong in the theme.styl
// XXX eventually each forum will have its own theme.{styl,css}

header-height = 50px
forum-header-height = 70px

body
  grid(90%,100%)
  overflow visible!important
  a
    cursor pointer
  .scroll-to, .scroll-to-top
    cursor pointer

.invisible
  opacity 0
  transition opacity .4s ease-out

//{{{ Structure applied after body scrolls
body.expanded header
  .menu
    .row
      line-height 30px!important
      font-size 15px!important
body.has-scrolled
  header
    height 30px
    .container
      .logo
        font-size 1.1em
      .menu
        .row:hover
          .submenu
            top 34px
        .row
          line-height 30px
          font-size 15px
      .search
        top 0!important
        right 0!important
        .query
          font-size .9em
          width 340px!important
          height 12px
  .left
    .user-profile
      left 0px!important
  footer
    opacity 1
    font-size .85em
    bottom -10px
    line-height 16px

  #main_content.container
    .forum
      .header::before
        position absolute
        opacity .8
//}}}

//{{{ Background layer
img.bg
  position fixed
  height 100%
  width 100%
  z-index 0
  left 0!important
  display none
  top 200px
img.bg.visible
  display block
img.bg.active
  top 0!important
  z-index 1!important
  transition top .3s ease-out
  display block
//}}}
//{{{ Header
body.expanded
  .container
    padding 110px 20px 20px 20px
    transition padding .3s ease-out
  .stuck
    display none!important
  header
    height 100px!important
    transition background-color .25s ease-out, height .2s ease-out
    .container
      .search::before
        content ''
        border-left 10px solid #555
        border-top 8px solid transparent
        border-bottom 8px solid transparent
        position absolute
        top 25px
        left 0
      .search
        top 5px!important
        right auto!important
        #query.query
          position relative
          z-index 9
          font-size 31px
          padding 5px 20px
          letter-spacing 3px
          font-weight 100
          height 51px
          width 500px!important
      .advanced
        display block
        position absolute
        right 10%
        top 10px
  header::after
    cursor pointer
    position absolute
    right 30px
    top 18px
    content 'x'

header
  position fixed
  height header-height
  z-index 7
  .container
    width 800px
    margin 0 auto
    .menu
      margin -3px auto 0 auto
      display inline-block
      position absolute
      bottom 0
      .row:hover
        z-index 7
        .submenu
          visibility visible
          top 51px
          transition top .1s ease-out .5s
      .row
        cursor pointer
        display inline-block
        line-height header-height
        font-size 16px
        .title
          position relative
          z-index 10
        .submenu
          z-index 9
          top -500px
          visibility hidden
          margin 0 0 0 2px
          position absolute
          .row
            display block
    .search
      top 13px
      right 12px
      position absolute 
      .query
        width 300px
        font-size 1.3em
    .advanced
      display none
//}}}
//{{{ Left side
section.left
  z-index 6
  top 80px
  width 175px
  position fixed
  .user-profile
    position absolute
    top 35px
    left 0
    width 140px
    height 290px
    .photo
      overflow hidden
      margin-bottom 5px
      width 140px
      height 100px
      img
        width 100%
    .arrow
      content ''
      position absolute
      top 87px
      right -16px
      border-bottom 20px solid transparent
      border-top 20px solid transparent
      height 0
      width 0
    .sort::before
      content ''
      width 1px
      height 1px
      position absolute
      left 0
      bottom 75px
      z-index 3
      border-top-color transparent
      border-right-color transparent
      border-bottom-color transparent
    .sort
      position relative
      margin-top 10px
      height 117px
      overflow hidden
      cursor pointer
      #sort
        padding 23px 10px 90px 10px
        text-align center
        overflow-y scroll
        height 1px
        margin 0
        list-style none
        li
          font-size .8em
          letter-spacing 1px
          padding 0 0 1px 0
          margin 0 0 10px 0
      .indicator
        top 33px
        position absolute
        left 20px
        width 100px
        height 1px
  .scroll-to-top:hover
    border-bottom 10px solid #777
  .scroll-to-top
    position absolute
    right 5px
    bottom 5px
    border-left 8px solid transparent
    border-right 8px solid transparent
    border-bottom 10px solid #555
//}}}
//{{{ Main Content
.col1
  width 425px
.col2
  width 425px

//#left_content.container
//  grid-space(20%)

//#forum_content.container
//  grid-space(80%)

#main_content.container
  grid(100%, 800px)
  padding forum-header-height 0 0 0!important
  z-index 5
  .forum
    position relative
    clear both
    min-height 450px
    margin-left 180px
    .container
      z-index 6
    .sticky-wrapper
      height auto!important
    .header::before
      position absolute
      opacity .35
      top -50px
      left 20%
      content ''
      width 640px
      height 200px
      z-index 1
      background-image url(cache_url+'/images/blob.png')
      background-repeat no-repeat
    .header.stuck::before
      opacity 1!important
    .header.stuck
      color #fff!important
      text-shadow none!important
      position fixed
      top 3px
      left 50px
      z-index 7
      overflow hidden
      font-size 17px
      letter-spacing 0
    .header
      width 95%
      overflow visible
      text-align center
      .description
        text-rendering optimizelegibility
        text-transform capitalize
        overflow hidden
        text-overflow ellipsis
        width 35%
        left 24%
        position relative
        z-index 2
    .scroll-to
      position absolute
      right 0
      bottom -30px
    .post:hover
      transform translateY(-15px)
      position relative
      z-index 4
      transition all .1s ease-out 1.3s
      .comment
        height 30px
        transition height .05s ease-out 1.6s
    .post
      float left
      margin 10px
      .photo
        float left
        width 25px
        img
          width 100%
    .comment 
      margin-top 2px
      padding 3px 7px
      height 0
      .msg
        font-size .9em
        font-style italic
        width 70%
    .subpost
      position relative
      clear both
      .photo
        overflow hidden
        width 40px
        float left
        img
          width 100%
  .scroll-to-top
      clear both
//}}}
//{{{ Footer
footer
  text-align center
  position fixed
  bottom 0
  right 0
  left 0
  height 30px
  z-index 5
//}}}

//{{{ RESPONSIVEness
@media screen and (max-width: 800px)
  header
    height 30px
    .logo
      font-size 1.1em!important
      margin-top 4px!important
    .menu
      .row
        line-height 30px!important
    .search
      float right!important
      position relative!important
      top 0!important
      right 0!important
      .query
        height 9px
  body
    grid(100%,475px)
    .left
      display none!important
    #main_content.container
      margin 0 auto 0 10px!important
      .forum
        margin-left 0!important
  
@media screen and (max-width: 500px)
  header
    font-size 0.8em
    display none
  body
    grid(100%,320px)
    #main_content.container
      margin-left 0!important
      padding 25px 15px!important
      .forum
        margin-bottom 10px!important
        margin-left 0!important
  body.has-scrolled
    .container
      margin-left 0!important
      padding 25px 15px!important
    .left
      display none!important
// }}}
// vim:fdm=marker
