
// XXX below defines the layout's skeleton
// XXX decoration & embellishments belong in the theme.styl
// XXX eventually each forum will have its own theme.{styl,css}
bounce = cubic-bezier(0,1.72,0,.75)

header-height           = 100px
header-scrolled-height  = 35px

forum-header-height = 0
footer-height       = 36px
left-content-width  = 310px

section
  box-sizing border-box

body
  grid(90%,100%)
  overflow visible!important
  a
    cursor pointer
  .scroll-to, .onclick-scroll-top
    cursor pointer

body.waiting
  cursor wait!important
  a, input, button, textarea
    cursor wait!important

.onclick-logout, .onclick-profile, .admin-only, .has-facebook, .has-google, .has-twitter, .has-auth
  display none

body.scrolled .nicescroll-rails
  top 100px!important

.nicescroll-rails
  position fixed!important
  cursor s-resize!important
  top 190px!important
  z-index 8!important
  div
    margin-right 5px

.close, .onclick-close
  opacity 0
  cursor pointer
  line-height 9px
  text-indent 1px
  border-radius 10px
  padding 6px
  font-size .8em

.hidden
  display none

//{{{ Header
// TODO move this into app/stylus/pb.styl & re-create everything in css (after/before pseudo for text)
.logo
  margin 0
  padding 0
  a
    text-shadow 0 0 1px #ccc
    color #888
    background-image url(cache-url + '/images/pb_icon_logo_sm.png')
    background-repeat no-repeat
    padding-left 35px
    padding-top 4px
    vertical-align top
    font-size .75em
    text-decoration none
    font-weight 200
    letter-spacing -1px
    font-style normal
    position fixed
    top 17px
    left 35px
    height 30px
    z-index 10
    strong
      color #555
      letter-spacing -1px
      font-style italic
      font-weight 600
      padding-left 3px
header
  position fixed
  height header-height
  top 0
  z-index 10
  .container
    width 800px
    margin 0 auto
    .tools:hover::after
      top 32px
      right 53px
      border-top-width 9px
      transform rotate(10deg)
      transition all .2s ease-out
    .tools::after
      border 4px solid transparent
      border-top 6px solid #fff
      content ''
      position absolute
      top 33px
      right 51px
      z-index 13
      height 20px
    .tools::before
      content ''
      position absolute
      top 25px
      right 45px
      z-index 12
      height 20px
      width 20px
      border-radius 20px
    .tools:hover
      .profile
        transform rotate(8deg)
        transition all .05s ease-out
      .container
        width 100px
        height auto
        padding-top 80px
        margin-left -50px
        opacity 1
        transition all .2s ease-out
        menu
          li
            height 23px
            opacity 1
            transition height .1s ease-out .1s
    .tools
      position absolute
      right -10px
      top 18px
      width 160px
      z-index 50
      .profile
        animation-name none
        position relative
        cursor pointer
        display none
        opacity .6
        right -35px
        top -8px
        height 75px
        width 75px
        border-radius 75px
        transition all .3s ease-out
      .container
        height 0
        width 0
        opacity 0
        padding 0
        margin 0
        transition all .1s ease-out
        menu
          position relative
          right -66px
          border-radius 15px
          list-style none
          padding 20px
          li
            padding 2px 6px
            height 0
            opacity 0
            overflow hidden
    #warning
      bottom 8px
    .menu
      padding 0
      margin -3px auto 0 auto
      display inline-block
      position absolute
      bottom -1px
      > .row
          position relative!important
          z-index 50!important
        .title
          display inline-block
          text-transform capitalize
          padding 0 15px
          margin-right 20px
      .row.active, .row:hover
        z-index 7
        > .submenu
          opacity 1
          top 30px
          max-height 450px
          height auto
          min-width 850px
          padding 10px 0 25px 0
          margin-left -27px
          box-shadow 0 1px 15px -1px light
          transition padding .15s ease-out .15s, margin-left .15s ease-out .2s, box-shadow .15s ease-out .2s, max-height .05s ease-out .2s
      .row
        cursor pointer
        display inline
        line-height 38px
        font-size 1em
        position relative
        .title
          position relative
          z-index 66
        .submenu
          text-transform capitalize
          z-index 65
          top -600px
          overflow-y scroll
          opacity 0
          position absolute
          padding 0
          margin 0
          max-height 0
          min-width 600px
          box-shadow 0
          transition box-shadow 0s ease-out .1s, padding .1s ease-out, opacity .1s ease-out, max-height .0s ease-out .1s, top 0s ease-out .1s, min-width 0s ease-out .1s, margin 0s ease-out .1s
          > menu
            margin-top 12px!important
          menu
            margin 0
            padding-left 25px
            .row
              width 250px
              display inline-block
              float left
              font-size .9em
              text-indent 2px
              a
                line-height 28px
                padding 0 10px
                display inline-block
    .search
      top 10px
      left 234px
      position absolute 
      z-index 8
      .query
        width 400px
        padding-right 45px
        padding-top grid
        font-size 1.3em
        text-indent 8px
      .onclick-close
        cursor pointer
        position absolute
        right 11px
        top -40px
        z-index 14
        font-size 1.1em
        line-height 6px
        opacity 0
        transition opacity .3s ease-out
//}}}
//{{{ Left side
body.paginator
  #left_content
    .handle
      right -26px
    #paginator
      display none
      right -12px
      width 12px
      height auto
      top 0
      bottom 0
      transition width .2s ease-out

#left_content
  position fixed
  left 0
  bottom 0
  top (header-height+2)
  height auto
  width left-content-width
  z-index 8
  padding-top (grid*2)
  .photo
    margin-top 9px
  .handle::before
    position absolute
    content ''
    border-bottom 8px solid transparent
    border-top 8px solid transparent
    border-left 10px solid transparent
    height 0
    width 0
    top 8px
    left -1px
  .handle:hover
    right -15px
    transition right .1s ease-out
  .handle
    z-index 5
    border-radius 20px
    line-height 28px
    font-size .9em
    height 32px
    width 32px
    margin-top 9px
    top (header-height-20)
    right -17px
    cursor pointer
    position absolute
    text-align center
    cursor pointer
    z-index 95
  #paginator
    position absolute
    width 0
    height 0
    z-index 7
    padding-top 80px
    padding-bottom 50px
    cursor pointer
    .current
      border-radius 8px / 4px
      min-height 51px
      cursor ns-resize
      position relative
      text-align center
      font-size 13px
      margin 0 -1px
      word-wrap break-word
      line-height 17px
      letter-spacing 20px
      padding-left 3px
      padding-top 2px
      transition top .2s ease-out, height .3s ease-out
    .current.ui-draggable-dragging
      transition top 0
    a.page
      display block
      position absolute
      height footer-height + (grid * 2)
      width 12px
    a.page.previous
      top 0
    a.page.next
      bottom 15px
    a.page.previous::before
      position absolute
      height 0
      width 0
      content ''
      left 3px
      top 0
      border-top 10px solid transparent
      border-left 4px solid transparent
      border-right 4px solid transparent
    a.page.next::before
      position absolute
      height 0
      width 0
      left 3px
      bottom 0
      content ''
      border-left 4px solid transparent
      border-right 4px solid transparent
      border-bottom 10px solid transparent
    .tooltip
      margin-left 20px
      height 4px
      border-radius 0px
      border-top-right-radius 6px
      border-bottom-right-radius 6px
      box-shadow none
      font-size 12px
      line-height 2px
      font-weight bold
  #paginator:hover
    transition width .08s .2s ease-out, right .08s .2s ease-out!important
    width 15px!important
    right -15px!important
    .current
      padding-left 5px
      transition padding-left .08s .2s ease-out
    a.page
      transition width .08s .2s ease-out, right .08s .2s ease-out
      width 18px
    a.page.previous:before
      border-left 5px solid transparent
      border-right 5px solid transparent
      transition border-left .08s .2s ease-out, border-right .08s .2s ease-out
    a.page.next:before
      border-left 5px solid transparent
      border-right 5px solid transparent
      transition border-left .08s .2s ease-out, border-right .08s .2s ease-out

  .ui-resizable-e
    cursor ew-resize
//}}}
//{{{ Main Content
.col1
  width 425px
.col2
  width 425px

.photo
  overflow hidden
  float left
  margin-left -5px
  margin-right grid
  width 31px
  height 31px
  float left
  img
    width 100%

.main-content
  grid(100%, 800px)
  padding forum-header-height 0 0 0
  padding-top (header-height+(grid*2))
  z-index 5
  .breadcrumb
    position fixed
    top -100px
    text-align center
    z-index 100
    border-bottom-left-radius 3px
    border-bottom-right-radius 3px
    padding (grid/2+2) (grid*2.5) 3px (grid*2.5)
    font-size .9em
    margin-bottom (grid/2)
    text-transform capitalize
    a, em, span
      text-transform capitalize
      padding-right (grid/2)
      margin-right 3px
  .resizable
    padding-left (left-content-width+(grid*3))
  .onclick-scroll-top
    clear both
//}}}
//{{{ Footer
footer.expanded
  z-index 100
  .post-reply::after
    content 'Close'
  .post-reply:hover::before
    border 4px solid transparent
    border-top 8px solid #aaa
    top 8px
    left 36px
  .post-reply::before
    border 4px solid transparent
    border-top 6px solid #ccc
    top 9px
    left 36px
footer.active
  opacity 1
  bottom -(grid * 1.4)
  font-size .75em
footer
  position fixed
  right 0
  //left 0
  // bottom -(footer-height)
  bottom -(grid)
  height footer-height
  z-index 9
  width auto
  .post-reply::after
    position absolute
    content 'Reply'
    left 0
    top 0
  .post-reply
    display none
    cursor pointer
    position absolute
    padding-right 20px
    font-size .95em
    letter-spacing 1px
    left 12px
  .post-reply:hover
    color #222
  .post-reply:hover::before
    border-left 8px solid #aaa
    left 39px
    transition all .1s ease-out
  .post-reply::before
    position absolute
    content ''
    border 4px solid transparent
    border-left 6px solid #ccc
    top 8px
    left 38px
    transition all .2s ease-out
  .onclick-scroll-top:hover
    color #222
  .onclick-scroll-top:hover::before
    border-bottom 8px solid #aaa
    top 2px
    transition all .1s ease-out
  .onclick-scroll-top::before
    position absolute
    content ''
    border 4px solid transparent
    border-bottom 6px solid #ccc
    top 4px
    right 42px
    transition all .2s ease-out
  .onclick-scroll-top
    position absolute
    top 0
    right 0
    font-size .8em
    letter-spacing 2px
    padding 0 15px 0 30px
#chat_drawer
  position fixed
  height 0
  bottom 0
  left 0
  right 0
  z-index 10
//}}}

//{{{ Scrolled <body>
body.scrolled
  .logo
    a
      top 3px
      font-size .62em
      transition all .1s ease-out
      padding-top 6px
  header
    height header-scrolled-height
    .container
      .menu
        bottom -2px
        > .row:hover
          .submenu
            top 30px
        .row
          top 1px
          line-height header-scrolled-height + 1
          font-size 16px
      .tools
        top 16px
        .container menu
          padding 0
          margin 0
      .tools::after
        top 0
        right 32px
        border-top-color light
      .tools:hover
        .container
          padding-top 35px!important
          menu
            padding 15px
      .tools::before
        display none
      .search
        top -200px!important
        opacity 0
        transition all .1s ease-out
        .onclick-search
          right 14px
        .query
          font-size 1em
          height 18px
      .profile
        height 30px
        width 30px
        top -14px
        right -85px
        transition all .2s bounce
  #left_content
    top (header-scrolled-height+5)
    padding-top (grid * 1.5)
    transition padding-top .3s ease-out, top .2s ease-out!important
    .handle
      transition top .2s ease-out
    #paginator
      a.page.previous::before
        top -5px
      a.page.next::before
        bottom 10px
  .main-content
    .breadcrumb
      top (header-scrolled-height+3)
      transition top .2s bounce
  footer
    opacity 1
//}}}
//{{{ Collapsed left nav
body.collapsed
  .nicescroll-rails
    display none
  #left_content
    width 0!important
    transition width .1s
    .handle::before
      transform rotate(180deg)
      top 8px
      left 14px
      transition all .5s ease-out
    .handle
      right -25px
    .create a
      display none!important
  .main-content
    .resizable
      padding-left (grid*5)!important
      transition padding-left .2s ease-out
  footer
    left 0!important
//}}}

//{{{ Background layer
img.bg
  position fixed
  height 100%
  width 100%
  z-index 0
  left 0
  display none
  top 300px
img.bg.active
  top 0!important
  transition top .3s
  z-index 1!important
  //transition opacity .8s ease-out
  //opacity 1
  //display block
//}}}

//{{{ Masonry
.masonry, .masonry .masonry-brick
  transition-duration 0.1s
.masonry
  transition-property width, height
.masonry .masonry-brick
  transition-property left, right, top
//}}}
// vim:fdm=marker
