
// XXX below defines the layout's skeleton
// XXX decoration & embellishments belong in the theme.styl
// XXX eventually each forum will have its own theme.{styl,css}

header-height          = 50px
header-scrolled-height = 30px

forum-header-height = 0
footer-height       = 32px
left-content-width  = 200px

@import './app/stylus/layout_states'

section
  box-sizing border-box

body
  grid(90%,100%)
  overflow visible!important
  a
    cursor pointer
  .scroll-to, .scroll-to-top
    cursor pointer

//{{{ Header
.logo
  a
    margin-top 15px
    vertical-align top
    font-size .75em
    text-decoration none
    font-weight 200
    letter-spacing -2px
    position fixed
    top 1px
    left 15px
    z-index 9
    strong
      letter-spacing -1px
      font-weight 500
      padding-left 4px
header
  position fixed
  height header-height
  top 0
  z-index 7
  .close
    display none
  .container
    width 800px
    margin 0 auto
    .menu
      padding 0
      margin -3px auto 0 auto
      display inline-block
      position absolute
      bottom 0
      > .row
          position relative!important
          z-index 50!important
        .title
          display inline-block
          text-transform capitalize
          padding 0 19px
      .row.active, .row:hover
        z-index 7
        .submenu
          opacity 1
          top 53px
          min-width 250px
          transition top .25s ease-out .3s, opacity .3s ease-out .4s
          .row:hover
            text-indent 19px
            transition text-indent .1s ease-out
      .row
        cursor pointer
        display inline-block
        line-height header-height
        font-size 16px
        .title
          position relative
          z-index 55
        .submenu
          z-index 65
          top -600px
          max-height 450px
          overflow-y scroll
          opacity 0
          position absolute
          padding 0
          margin 0
          .row:first-child
            padding-top (grid/2)
          .row:last-child
            padding-bottom (grid/2)
          .row
            display block
            font-size 14px
            text-indent (grid * 2)
            a
              display block
    .search
      top 13px
      right 12px
      position absolute 
      .query
        width 300px
        font-size 1.3em
    .advanced
      position absolute
      right -800px
//}}}
//{{{ Left side
#left_content.container
  position fixed
  left 0
  bottom 0
  top 0
  height auto
  width left-content-width
  width 200px
  //overflow-x hidden
  //overflow-y scroll
  z-index 8
  //padding grid
  padding-top (grid*6)
  .photo
    margin-top 8px
  .handle
    border-radius 20px
    line-height 28px
    font-size .9em
    height 30px
    width 30px
    top (header-height - (grid*2))
    right -26px
    cursor pointer
    position absolute
    text-align center
    cursor pointer
    z-index 95
  .create
    margin (grid/2) 15px (grid/2) 15px
    a
      text-decoration none
      animation-name none
      padding 8px 10px
      display block
  .threads
    overflow-y scroll
    height 100%
    margin 0
    padding-top grid
    .thread
      padding 1px 15px 8px 16px
      .title
        overflow hidden
        max-height 65px
        text-transform capitalize
        margin grid 0 0 0
      .username
        font-size .7em
        em
          text-transform capitalize
          font-weight 600
          margin-left (grid/2)
          font-size 1.1em
      .created
        font-size .9em
      .created, .username, .post-count
        white-space nowrap
        text-overflow ellipsis
        margin-bottom -6px
      .post-count, .views
        font-weight bold
        font-size .8em
      .post-count, .views
        i
          font-weight 100
          font-size .9em
          margin 0 grid 0 (grid/2)

    .thread:last-child
      margin-bottom (grid*10)

section.left-chrome
  z-index 7
  top 80px
  width 175px
  position fixed
  .user-profile
    position absolute
    top 35px
    left 0
    width 150px
    height 95px
    .photo
      overflow hidden
      margin-bottom 5px
      width 148px
      height 100px
      img
        width 100%
    .arrow
      content ''
      position absolute
      top 87px
      right -16px
      border-bottom 20px solid transparent
      border-top 20px solid transparent
      height 0
      width 0
    .sort::before
      content ''
      width 1px
      height 1px
      position absolute
      left 0
      top 11px
      z-index 3
      border-top-color transparent
      border-right-color transparent
      border-bottom-color transparent
    .sort
      position relative
      height 95px
      overflow hidden
      cursor pointer
  .scroll-to-top:hover
    border-bottom 10px solid #777
  .scroll-to-top
    position absolute
    right 1px
    bottom 0
    border-left 8px solid transparent
    border-right 8px solid transparent
    border-bottom 10px solid #555
//}}}
//{{{ Main Content
.col1
  width 425px
.col2
  width 425px

.photo
  overflow hidden
  float left
  padding 2px
  margin-right grid
  width 35px
  height 35px
  float left
  img
    width 100%

#main_content.container
  grid(100%, 800px)
  padding forum-header-height 0 0 0!important
  z-index 5
  #breadcrumb
    top -100px
    position fixed
  .breadcrumb
    margin-bottom (grid/2)
    text-transform capitalize
    a, em, span
      text-transform capitalize
      padding-right (grid/2)
      margin-right 3px
  .forum:first-child
    padding-top (grid * 5)!important
  .forum
    position relative
    clear both
    min-height 650px
    padding-left left-content-width
    p
      margin 0
    .container
      z-index 6
    .header.stuck::before
      opacity 1!important
    .header
      width 95%
      overflow visible
      text-align center
      .description
        text-rendering optimizelegibility
        text-transform capitalize
        overflow hidden
        text-overflow ellipsis
        width 45%
        left 19%
        position relative
        z-index 2
    .scroll-to
      position absolute
      right 0
      bottom -30px
    .post:hover
      position relative
      z-index 4
      transition all .1s ease-out 1.3s
    .post-edit
      margin-bottom (grid*4)
      margin-left (grid/2)
      .sceditor-container
        margin-bottom (grid*2)
        border-top-left-radius 0
        right 0
        .sceditor-toolbar
          background-color #fafafa
          border-bottom 1px solid #eee
        iframe
          width 99%!important
      .title
        display block
        width 75%
        margin-bottom 0
        border-bottom-left-radius 0
        border-bottom-right-radius 0
      .body
        width 90%
        display block
        margin grid 0
        min-height 40px
    .post
      float left
      //overflow hidden
      .breadcrumb
        span, em
          display none
      .profile
        width 50px
        height 50px
      img
        max-width 100%
    //.post.editing, .subpost.editing
    //  padding-left (grid/2)
    .post, .subpost
      position relative
      clear both
      // overflow hidden
      margin-right (grid*4)
      margin-left (grid*3)
      margin-top (grid/2)
      margin-bottom grid
      .title
        margin 0 0 (grid/2) 0
        font-size 1.5em
      .title, .user, .date
        text-transform capitalize
      .body
        margin 2px 0 grid 0
      .actions
        opacity 0
        letter-spacing -10px
        margin-top (grid+2)
        line-height 15px
        font-size .9em
        color #444
        a
          margin-right grid
        .edit
          display none
      .comment
        position relative
        width 250px
        .body
          height 65px
          margin-bottom grid
        .submit
          position absolute
          z-index 5
          top grid
          right grid
    .page-loaded:last-child, #listview div[data-infinity-pageid]
      padding-bottom (grid*4) !important
    .post:hover, .subpost:hover
      .actions
        opacity 1
        letter-spacing 0
        transition opacity .3s, letter-spacing .09s
    .subpost
      padding-bottom grid
      .date
        font-size .8em
        color #555
        margin-top -3px
      p
        margin 0
      .photo
        height 30px
        width 30px
    .children
      margin-left (grid/2)
      .children
        margin-left (grid*3)
        //margin-bottom (grid*3)
        .user, .date
          display inline-block
        .date
          margin-left grid
        .subpost
          margin-left (grid*3)
          padding grid
          font-size .85em
        .photo
          overflow hidden
          width 20px
          height 20px
          float left
        img
          max-width 100%
        .body
          blockquote
            margin (grid/2)
            padding 0
  .scroll-to-top
      clear both
//}}}
//{{{ Footer
footer
  text-align center
  position fixed
  bottom 0
  right 0
  left 0
  height footer-height
  z-index 9
  width auto
//}}}

//{{{ Login
.fancybox-wrap.on-validate
  .validate
    display block!important
    .msg
      h3
        margin-top (grid*2)!important
  .register, .login
    display none!important
.fancybox-wrap.on-register
  #auth
    .register
      display block!important
    .choose, .login, .forgot
      display none!important
.fancybox-wrap.on-choose
  #auth
    h3
    .choose
      display block!important
    .login, .forgot
      display none!important
    .msg
      visibility hidden
.fancybox-wrap.on-forgot
  #auth
    .forgot
      display block!important
    .login, .choose
      display none!important
.fancybox-wrap.on-error
  #auth
    .msg
      height 30px
      opacity 1
      transition height .5s, opacity 1s
#auth
  .choose, .forgot, .register
    h3
      margin-top (grid+2)
      float right
    input[type='submit']
      margin-top 3px
  .error
    display none
  h2
    margin 15px 0 20px 15px
    letter-spacing 1px
  h3
    margin 0 0 10px 0
  .social
    margin 20px auto
    width 313px
    a
      text-decoration none
  fieldset
    padding 20px 102px
  input[name="email"]
    width 286px
    padding 15px
  input[name="username"]
    width 300px
    display block
  input[name="password"]
    width 300px
  input[type="submit"]
    height 42px
    width 314px
    margin-left 2px
    margin-top 13px
    display block

#paginator
  position fixed !important
  width 100px
  height 200px
  bottom 100px
  right 0
  z-index 9

  a.page
    display block
    text-decoration none
    padding 5px 10px

  a.page:hover, a.active
    text-decoration none

//}}}

//{{{ Overlays (pagination & sorting)
#paginator, #sort
  position relative
  box-sizing border-box
  padding (grid) (grid) (grid*7) (grid*2)
  text-align center
  overflow-y scroll
  height 109px
  margin 0
  list-style none
  li
    font-size .8em
    padding 0 0 1px 0
    margin 0 0 5px 0
.indicator
  top 21px
  position absolute
  left 0
  width 140px
  height 1px
//}}}
//{{{ Background layer
img.bg
  position fixed
  height 100%
  width 100%
  z-index 0
  left 0
  display none
  top 300px
img.bg.active
  top 0!important
  transition top .3s
  z-index 1!important
  //transition opacity .8s ease-out
  //opacity 1
  //display block
//}}}

// vim:fdm=marker
