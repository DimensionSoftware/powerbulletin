#!/bin/bash

echo killing old processes...
bin/diediedie

# kill any old lsc watchers (spare grunt's life)
echo "Killing node processes..."
ps ax|grep node|grep -v grunt|awk '{print $1}'|xargs killall -9

set -e
echo compiling/watching...
# launch this in the background async to pick up file changes
node_modules/.bin/lsc -cw app client shared component lib/mutant client/requirejs-config public/app plv8_modules &

sleep 2

echo launching...
bin/powerbulletin
